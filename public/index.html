<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="World Humanitarian Data and Trend 2018" />
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <link rel="shortcut icon" href="src/img/favicon.png" type="image/vnd.microsoft.icon" />
    <title>2019 Interactive Summary</title>
    <link href="src/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts  -->
    <link href="src/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i,600,600i,700,700i|Roboto+Condensed:300,300i,400,400i,700,700i|Roboto+Slab:100,300,400,700|Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese"
        rel="stylesheet">

    <!-- C3 Chart-->

    <link href="src/css/c3.css" rel="stylesheet">

    <!-- Custom styles  -->
    <link href="src/css/slider.css" rel="stylesheet">
    <link href="src/css/style.css" rel="stylesheet">
    <link href="src/css/agendaforhumanity.css" rel="stylesheet">


    <style>
        @import url("http://fonts.googleapis.com/css?family=Open+Sans:400,600,700");
        @import url("http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css");

        div.tooltip {
            position: absolute;
            text-align: center;
            width: 280px;
            text-align: center;
            margin: 0;
            padding: 10px;
            padding-top: 15px;
            padding-bottom: 5px;
            -ms-transform: translateY(-50%);
            transform: translateY(-50%);
            font: 20px 'Roboto Condensed', sans-serif;
            background: #4E5155;
            color: #fff;
            border: 0px;
            border-radius: 8px;
            pointer-events: none;
        }



        .modal-wide .modal-body {
            overflow-y: auto;
        }

        .modal-wide .modal-dialog {
            max-width: 100vw;
        }

        .inter-modal .close-modal {
            position: absolute;
            top: 25px;
            right: 25px;
            width: 75px;
            height: 75px;
            cursor: pointer;
            background-color: transparent;
        }

        .detail-modal .close-modal {
            position: absolute;
            top: 25px;
            right: 25px;
            width: 75px;
            height: 75px;
            cursor: pointer;
            background-color: transparent;
        }

        .crises-modal .close-modal {
            position: absolute;
            top: 25px;
            right: 25px;
            width: 75px;
            height: 75px;
            cursor: pointer;
            background-color: transparent;
        }

        .detail-modal .close-modal:hover {
            opacity: 0.3;
        }

        .detail-modal .close-modal .lr {
            /* Safari and Chrome */
            z-index: 1051;
            width: 1px;
            height: 75px;
            margin-left: 35px;
            /* IE 9 */
            -webkit-transform: rotate(45deg);
            transform: rotate(45deg);
            background-color: #143058;
        }

        .detail-modal .close-modal .lr .rl {
            /* Safari and Chrome */
            z-index: 1052;
            width: 1px;
            height: 75px;
            /* IE 9 */
            -webkit-transform: rotate(90deg);
            transform: rotate(90deg);
            background-color: #143058;
        }

        .detail-modal .modal-content {
            padding: 100px 0;
            text-align: center;
        }






        .inter-modal .close-modal:hover {
            opacity: 0.3;
        }

        .inter-modal .close-modal .lr {
            /* Safari and Chrome */
            z-index: 1051;
            width: 1px;
            height: 75px;
            margin-left: 35px;
            /* IE 9 */
            -webkit-transform: rotate(45deg);
            transform: rotate(45deg);
            background-color: #143058;
        }

        .inter-modal .close-modal .lr .rl {
            /* Safari and Chrome */
            z-index: 1052;
            width: 1px;
            height: 75px;
            /* IE 9 */
            -webkit-transform: rotate(90deg);
            transform: rotate(90deg);
            background-color: #143058;
        }

        .inter-modal .modal-content {
            padding: 100px 0;
            text-align: center;
        }




        .modal-content {
            position: relative;
            display: -ms-flexbox;
            display: flex;
            -ms-flex-direction: column;
            flex-direction: column;
            width: 100%;
            pointer-events: auto;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid rgba(0, 0, 0, .2);
            border-radius: .3rem;
            outline: 0;
        }

        .tran1 {
            background-color: #00B1EB;
            fill: #00B1EB;
            padding: 6px;
            color: #fff;
        }

        .tran2 {
            background-color: #51AF32;
            fill: #51AF32;
            padding: 6px;
            color: #fff;
            margin-left: -3px
        }

        .tran3 {
            background-color: #A863A5;
            fill: #A863A5;
            padding: 6px;
            color: #fff;
            margin-left: -3px
        }

        .tran4 {
            background-color: #F7A600;
            fill: #F7A600;
            padding: 6px;
            color: #fff;
            margin-left: -3px
        }

        .tran5 {
            background-color: #E84E0F;
            fill: #E84E0F;
            padding: 6px;
            color: #fff;
            margin-left: -3px
        }

        #chartfooter {
            font-size: 10px;
            margin: 0 auto;
            margin-top: 30px;

        }


        main {
            min-width: 320px;

            padding: 50px;
            margin: 0 auto;
            background: #fff;
        }

        section {
            display: none;

            padding: 20px 0 0;
            border-top: 1px solid #ddd;
        }

        main input {
            display: none;
        }

        label{ 
        font-size:20px;
            display: inline-block;
            margin: 0 0 -1px;
            padding: 15px 25px;
            font-weight: 600;
            text-align: center;
            color: #bbb;
            border: 1px solid transparent;
        }

        label:before {
            font-family: fontawesome;
            font-weight: normal;
            margin-right: 10px;
        }

        label[for*='1']:before {
            content: '\f080';
        }

        label[for*='2']:before {
            content: '\f080';
        }

        label[for*='3']:before {
            content: '\f080';
        }

        label[for*='4']:before {
            content: '\f080';
        }

        label:hover {
            color: #888;
            cursor: pointer;
        }

        input:checked+label {
            color: #555;
            border: 1px solid #ddd;
            border-top: 2px solid orange;
            border-bottom: 1px solid #fff;
        }

        #tab1:checked~#content1,
        #tab2:checked~#content2,
        #tab8:checked~#content2,
        #tab3:checked~#content1,
        #tab4:checked~#content1,
        #tab5:checked~#content3,
        #tab6:checked~#content3,
        #tab7:checked~#content3        
        {
            resize: both;
            display: block;

        }


        @media screen and (max-width: 650px) {
            label {
                font-size: 0;
            }

            label:before {
                margin: 0;
                font-size: 18px;
            }
        }

        @media screen and (max-width: 400px) {
            label {
                padding: 15px;
            }
        }


        /* Up and Down Arrows */
        .sortable th.descend:after {
            content: "\25B2";
        }

        .sortable th.ascend:after {
            content: "\25BC";
        }

        .c3-line {
            stroke-width: 5px;
        }

        .c3-circle {
            fill: black !important;
        }
        .tab-pane{
            height: 550px !important;
        }
        .nav-tabs {
            border-bottom: 1px solid #2267CD;
        }
        .nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
            color: #495057;
            background-color: #fff;
            border-color: #2267CD #2267CD #fff;
        }

        #nav-tab{
            height: 65px;
        }  
        #nav-home-tab{
            height: 65px;
        }
        #nav-profile-tab{
            height: 65px;
        }
        #nav-contact-tab{
            height: 60px;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="src/css/component.css" />
    <script src="src/js/snap.svg-min.js"></script>
</head>

<body id="body">

    <div id="pagewrap">
        <div class="container1 show" id="page-1">
            <!-- Navigation -->
            <header id="header" class="headers">


                <div class="google-translate-container">
                    <div id="google_translate_element">
                        <div class="skiptranslate goog-te-gadget" dir="ltr" style="">
                            <div id=":0.targetLanguage" class="goog-te-gadget-simple" style="white-space: nowrap;"><img
                                    src="https://www.google.com/images/cleardot.gif" class="goog-te-gadget-icon" alt=""
                                    style="background-image: url(&quot;https://translate.googleapis.com/translate_static/img/te_ctrl3.gif&quot;); background-position: -65px 0px;"><span
                                    style="vertical-align: middle;"><a aria-haspopup="true" class="goog-te-menu-value"
                                        href="javascript:void(0)"><span>Select Language</span><img
                                            src="https://www.google.com/images/cleardot.gif" alt="" width="1"
                                            height="1"><span
                                            style="border-left: 1px solid rgb(187, 187, 187);">&#8203;</span><img
                                            src="https://www.google.com/images/cleardot.gif" alt="" width="1"
                                            height="1"><span aria-hidden="true"
                                            style="color: rgb(118, 118, 118);">?</span></a></span></div>
                        </div>
                    </div>
                </div>
                <div class="header-container">
                    <h1 id="logo">
                        <a href="/" title="Home">
                            <img
                                src="https://www.agendaforhumanity.org/sites/default/files/agendaforhumanity-logo_0_0.png">
                        </a>
                    </h1>


                    <button id="btn-search" class="icon-search"></button>
                    <nav id="navigation" role="navigation" style="padding-top:9px;">
                        <div class="region region-main-menu">
                            <div id="block-system-main-menu">
                                <div class="content">
                                    <ul class="menu">
                                        <li class="first leaf"><a href="/">Home</a></li>
                                        <li class="leaf active-trail"><a
                                                href="https://www.agendaforhumanity.org/explore-commitments/stakeholder"
                                                title="">Stakeholders</a></li>
                                        <li class="expanded"><a
                                                href="https://www.agendaforhumanity.org/explore-commitments/indv-commitments"
                                                title="">Commitments</a>
                                            <ul class="menu">
                                                <li class="first leaf"><a
                                                        href="https://www.agendaforhumanity.org/aboutthecommitments">About
                                                        the Commitments</a></li>
                                                <li class="leaf"><a
                                                        href="https://www.agendaforhumanity.org/core-commitments"
                                                        title="">About the Core Commitments</a></li>
                                                <li class="last leaf"><a
                                                        href="https://www.agendaforhumanity.org/explore-commitments/indv-commitments"
                                                        title="">Explore Commitments</a></li>
                                            </ul>
                                        </li>
                                        <li class="expanded"><a
                                                href="https://www.agendaforhumanity.org/explore-commitments/report-search"
                                                title="">Reports</a>
                                            <ul class="menu">
                                                <li class="first leaf"><a
                                                        href="https://www.agendaforhumanity.org/report-guidance"
                                                        title="">Report Guidance</a></li>
                                                <li class="last leaf"><a
                                                        href="https://www.agendaforhumanity.org/explore-commitments/report-search"
                                                        title="">Explore Reports</a></li>
                                            </ul>
                                        </li>
                                        <li class="leaf"><a href="https://www.agendaforhumanity.org/initiatives"
                                                title="">Initiatives</a></li>
                                        <li class="expanded"><a href="https://www.agendaforhumanity.org/resources"
                                                title="">Resources</a>
                                            <ul class="menu">
                                                <li class="first leaf"><a
                                                        href="https://www.agendaforhumanity.org/resources/major-reports#annual-synthesis-reports-2018"
                                                        title="">Annual Synthesis Report 2018</a></li>
                                                <li class="leaf"><a
                                                        href="https://www.agendaforhumanity.org/resources/agendaforhumanity"
                                                        title="">Agenda for Humanity</a></li>
                                                <li class="leaf"><a
                                                        href="https://www.agendaforhumanity.org/resources/major-reports#annual-synthesis-reports-2018"
                                                        title="">Publications</a></li>
                                                <li class="last leaf"><a href="/resources/world-humanitarian-summit"
                                                        title="">World Humanitarian Summit</a></li>
                                            </ul>
                                        </li>
                                        <li class="expanded"><a href="https://www.agendaforhumanity.org/about-us"
                                                title="">About</a>
                                            <ul class="menu">
                                                <li class="first leaf"><a
                                                        href="https://www.agendaforhumanity.org/agendaforhumanity"
                                                        title="">About the Agenda for Humanity</a></li>
                                                <li class="leaf"><a href="https://www.agendaforhumanity.org/about-us"
                                                        title="">About Pact</a></li>
                                                <li class="last leaf"><a href="https://www.agendaforhumanity.org/summit"
                                                        title="">About the World Humanitarian Summit</a></li>
                                            </ul>
                                        </li>
                                        <li class="last leaf"><a href="https://www.agendaforhumanity.org/contact-us"
                                                title="">Contact</a></li>
                                    </ul>
                                </div>
                            </div> <!-- /.block -->
                        </div>
                        <!-- /.region -->


                    </nav>
                </div>
                <script type="text/javascript">
                    function googleTranslateElementInit() {
                        new google.translate.TranslateElement({
                            pageLanguage: 'en',
                            layout: google.translate.TranslateElement.InlineLayout.SIMPLE
                        }, 'google_translate_element');
                    }
                </script>
                <script type="text/javascript"
                    src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
            </header>



            <main>

                <input id="tab1" type="radio" name="tabs1" checked>
                <label for="tab1">2019 Visualization</label>



                <input id="tab3" type="radio" name="tabs1">
                <label for="tab3">2018 Visualization</label>

                <input id="tab4" type="radio" name="tabs1">
                <label for="tab4">2017 Visualization</label>

                <input id="tab2" type="radio" name="tabs1">
                <label for="tab2">Inter Year Analysis</label>

                <section id="content1">

                    <a data-toggle="modal" class="pdf-button" title="Export to Excel" data-target="#export">
                        <img src="src/img/fa-excel.png" style="width: 50px; padding: 10px;">
                    </a>
                    <a class="viewer-button pageload-link" href="#page-2" title="Tabular View">
                        <img src="src/img/fa-table.png" style="width: 50px; padding: 10px;">
                    </a>
                    <a class="accessibility-button" data-toggle="modal" title="Web Accessibility"
                        data-target="#accessibility">
                        <img src="src/img/fa-wheelchair.png" style="width: 50px; padding: 10px;">
                    </a>

                    <!-- Introduction and Year Selection Section -->
                    <div id="introduction" class="introduction-section text-center">
                        <div class="container">
                            <div class="row">
                                <div id="mobile-logo">
                                    <img
                                        src="https://www.agendaforhumanity.org/sites/default/files/agendaforhumanity-logo_0_0.png">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-8 mx-auto ">
                                    <h1 class="text mb-4 main_header"></h1>
                                    <p class="text-50">The Interactive Summary provides an overview of <span
                                            class="year"></span> reporting by
                                        stakeholders
                                        on implementation of commitments made at or after the World Humanitarian Summit.
                                        Click on the
                                        tabs to explore achievements, challenges and cross-cutting issues by each of the
                                        24
                                        Transformations of the Agenda for Humanity. </p>

                                </div>
                            </div>
                            <div class="row"> &nbsp;</div>
                            
                        </div>
                    </div>


                    <div id="content">
                        <div class="stakeholder-section text-center">
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-8 mx-auto ">


                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Stakeholder, Challenges and Cross-cutting Issues Section -->
                        <div id="protracted-crisis" class="protracted-crisis-section text-center ">
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-8 mx-auto">
                                        <h2 class="text mb-4 transformation_header"></h2>
                                        <p class="caption_no_border" data-localize="overview_sources">* Click on the
                                            bars to see
                                            details by Transformation</p>
                                    </div>
                                </div>
                            </div>
                            <div class="block">
                                <div class="row">
                                    <div class="col-md-3 col-sm-12 mx-auto"
                                        style="padding-top: 350px; margin-bottom: 50px;">
                                        <h3 class="text mb-4 stakeholder-header"></h3>
                                        <div id="total-stackholder"></div>
                                        <p class="caption_no_border" id="asof" data-localize="overview_sources"></p>
                                    </div>
                                    <div class="col-9" id="transformation_chart">
                                        <div id="chart-transformation"></div>
                                        <div id="chartfooter">
                                            <span class="tran1">PREVENT AND END CONFLICT</span>
                                            <span class="tran2">RESPECT RULES OF WAR</span>
                                            <span class="tran3">LEAVE NO ONE BEHIND</span>
                                            <span class="tran4">WORK DIFFERENTLY TO END NEED</span>
                                            <span class="tran5">INVEST IN HUMANITY</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <table class="table" id="mobile-table-transformation">
                                        <thead>
                                            <tr class="header-row">
                                                <td class="country-name"></td>


                                                <td class="percentagebar">
                                                    <span style="float:left;"
                                                        data-localize="funded_text">Transformation</span>

                                                </td>
                                                <td class="percentagefigure">
                                                    <h3></h3>
                                                </td>
                                            </tr>
                                            <tr class="break-row">
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Country lists goes here -->
                                        </tbody>
                                    </table>
                                </div>

                                <div class="container-fluid" style="padding-top: 100px;">
                                    <nav>
                                        <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                                            <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab"
                                                href="#nav-home" role="tab" aria-controls="nav-home"
                                                aria-selected="true">
                                                <h3 class="popup_title text mb-4 text-center"
                                                    style="color: #2267CD !important;">STAKEHOLDERS</h3>
                                            </a>
                                            <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab"
                                                href="#nav-profile" role="tab" aria-controls="nav-profile"
                                                aria-selected="false">
                                                <h3 class="popup_title text mb-4 text-center"
                                                    style="color: #2267CD !important;" id="challenges_header">
                                                </h3>
                                            </a>
                                            <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab"
                                                href="#nav-contact" role="tab" aria-controls="nav-contact"
                                                aria-selected="false">
                                                <h3 class="popup_title text mb-4 text-center crosscuttiong_header"
                                                    style="margin-bottom: 1.8rem!important;color: #2267CD !important;">
                                                </h3>

                                            </a>
                                        </div>
                                    </nav>
                                    <div class="tab-content" id="nav-tabContent">
                                        <div class="tab-pane fade show active" id="nav-home" role="tabpanel"
                                            aria-labelledby="nav-home-tab">

                                            <div class="container-fluid block-other" style="padding-top:70px;"
                                                id="stakeholder">
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-12">

                                                        <h4 class="text mb-4 byregion_header text-left"
                                                            style="margin-right: 50px; "></h4>
                                                        <div id="chart-stakeholder-region"></div>
                                                    </div>


                                                    <div class="col-md-6 col-sm-12">
                                                        <h4 class="text mb-4 byorganisation_header text-left"
                                                            style="margin-right: 50px;"></h4>
                                                        <div id="chart-stakeholder"></div>
                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                        <div class="tab-pane fade" id="nav-profile" role="tabpanel"
                                            aria-labelledby="nav-profile-tab">

                                            <div class="container-fluid block" style="padding-top: 70px;">
                                                <div class="row">
                                                    <div class="container-fluid mx-auto">
                                                        <h4 class="text mb-4 text-left" style="margin-right: 50px; ">
                                                        </h4>
                                                        <div id="chart_challenges"></div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="tab-pane fade" id="nav-contact" role="tabpanel"
                                            aria-labelledby="nav-contact-tab">
                                            <div class="container-fluid block-other" style="padding-top: 70px;">
                                                <div class="row" id="ccichart">
                                                    <div class="col-lg-12 col-sm-12 mx-auto">
                                                        <h4 class="text mb-4 text-left" style="margin-right: 50px; ">
                                                        </h4>
                                                        <div id="crosscutting"></div>
                                                    </div>
                                                </div>
                                                <div class="row" id="ccitable">
                                                    <div class="col-lg-12 col-sm-12 mx-auto">
                                                        <div id="table-cci"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>




                               
                            </div>
                        </div>

                </section>

                <section id="content2">
                    <div id="introduction" class="introduction-section text-center">
                        <div class="container">
                            <div class="row">
                                <div id="mobile-logo">
                                    <img
                                        src="https://www.agendaforhumanity.org/sites/default/files/agendaforhumanity-logo_0_0.png">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-8 mx-auto ">
                                    <h1 class="text mb-4">Inter Year Analysis</h1>
                                    <p class="text-50">The Interactive Summary provides an overview of <span
                                            class="year"></span> reporting by
                                        stakeholders
                                        on implementation of commitments made at or after the World Humanitarian Summit.
                                        Click on the
                                        tabs to explore achievements, challenges and cross-cutting issues by each of the
                                        24
                                        Transformations of the Agenda for Humanity. </p>

                                </div>
                            </div>
                        </div>
                    </div>


                    <div id="content">
                        <div id="protracted-crisis" class="protracted-crisis-section text-center ">

                            <div class="block-other" id="stakeholder">
                                <div class="row">
                                    <div class="col-md-8 col-sm-12">

                                        <div id="y2016" class="row">
                                            <div class="col-md-4">
                                                <div id="charts_reported_2016"></div>
                                            </div>
                                            <div class="col-md-4">
                                                <div id="charts_reported_2017"></div>
                                            </div>
                                            <div class="col-md-4">
                                                <div id="charts_reported_2018"></div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-md-4 col-sm-12">

                                        <!-- /.info-box -->

                                        <!-- /.info-box-content -->

                                        <div class="info-box bg-green">
                                            <span class="info-box-icon"><i class="fas fa-desktop"></i></span>

                                            <div class="info-box-content">
                                                <span class="info-box-text">2019 Total Reported</span>
                                                <span class="info-box-number"><span
                                                        id="total-stakeholder-2018"></span></span>

                                                <div class="progress">
                                                    <div class="progress-bar" style="width: 20%"></div>
                                                </div>

                                            </div>
                                            <!-- /.info-box-content -->


                                        </div>
                                        <!-- Info Boxes Style 2 -->
                                        <div class="info-box bg-yellow">
                                            <span class="info-box-icon"><i class="fas fa-desktop"></i></span>

                                            <div class="info-box-content">
                                                <span class="info-box-text">2018 Total Reported</span>
                                                <span class="info-box-number"><span
                                                        id="total-stakeholder-2017"></span></span>

                                                <div class="progress">
                                                    <div class="progress-bar" style="width: 50%"></div>
                                                </div>

                                            </div>
                                            <!-- /.info-box-content -->
                                        </div>
                                        <!-- /.info-box -->
                                        <div class="info-box bg-red">
                                            <span class="info-box-icon"><i class="fas fa-desktop"></i></span>

                                            <div class="info-box-content">
                                                <span class="info-box-text">2017 Total Reported</span>
                                                <span class="info-box-number"><span
                                                        id="total-stackholder-2016"></span></span>

                                                <div class="progress">
                                                    <div class="progress-bar" style="width: 40%"></div>
                                                </div>

                                            </div>
                                        </div>


                                    </div>
                                </div>
                                <div class="row">&nbsp;</div>
                                <div class="row">&nbsp;</div>
                                <div class="row">&nbsp;</div>
                                <div class="row">&nbsp;</div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <nav>
                                            <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                                                <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab"
                                                    href="#nav-home1" role="tab" aria-controls="nav-home"
                                                    aria-selected="true">
                                                    <h3 class="popup_title text mb-4 text-center">STAKEHOLDERS</h3>
                                                </a>
                                                <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab"
                                                    href="#nav-profile1" role="tab" aria-controls="nav-profile"
                                                    aria-selected="false">
                                                    <h3 class="popup_title text mb-4 text-center">TRANSFORMATION</h3>
                                                </a>
                                                <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab"
                                                    href="#nav-contact1" role="tab" aria-controls="nav-contact"
                                                    aria-selected="false">
                                                    <h3 class="popup_title text mb-4 text-center">CHALLENGES</h3>
                                                </a>
                                            </div>
                                        </nav>
                                        <div class="tab-content" id="nav-tabContent">
                                            <div class="tab-pane fade show active" id="nav-home1" role="tabpanel"
                                                aria-labelledby="nav-home-tab">
                                                <h4 class="text mb-4 text-left"
                                                    style="padding-top: 30px; padding-bottom: 20px;">Type of stakeholders who reported (absolute numbers)</h4>
                                                <div id="chart-stakeholder-bar">
                                            </div>
                                            <h4 class="text mb-4 text-left"
                                                style="padding-top: 20px; padding-bottom: 20px;">Per cent of total reported</h4>
                                                <div id="chart-stakeholder-line">
                                        </div>



                                    </div>
                                    <div class="tab-pane fade" id="nav-profile1" role="tabpanel"
                                        aria-labelledby="nav-profile-tab">
                                        <h4 class="text mb-4 text-left" style="padding-top: 20px; padding-bottom: 20px;">Absolute numbers</h4>
                                                <div id="chart-transformation-bar">
                                    </div>
                                    <h4 class="text mb-4 text-left" style="padding-top: 20px; padding-bottom: 20px;">Per cent of total reported</h4>

                                                <div style="width: 90% !important;" id="chart_transformation_comp">
                                </div>


                            </div>
                            <div class="tab-pane fade" id="nav-contact1" role="tabpanel"
                                aria-labelledby="nav-contact-tab">
                                <h4 class="text mb-4 text-left" style="padding-top: 20px; padding-bottom: 20px;">Absolute numbers</h4>

                                                <div id="chart-challenge-bar">
                            </div>
                        </div>
                    </div>
        </div>
    </div>
    </div>




    </div>
    </div>
    </section>


    </main>

    </div>
    <div class="container1" id="page-2">
        <header id="header" class="">
            <div id="top-nav">

            </div>
            <div id="top-search">
            </div>
            <div class="google-translate-container">
                <div id="google_translate_element">
                    <div class="skiptranslate goog-te-gadget" dir="ltr" style="">
                        <div id=":0.targetLanguage" class="goog-te-gadget-simple" style="white-space: nowrap;"><img
                                src="https://www.google.com/images/cleardot.gif" class="goog-te-gadget-icon" alt=""
                                style="background-image: url(&quot;https://translate.googleapis.com/translate_static/img/te_ctrl3.gif&quot;); background-position: -65px 0px;"><span
                                style="vertical-align: middle;"><a aria-haspopup="true" class="goog-te-menu-value"
                                    href="javascript:void(0)"><span>Select Language</span><img
                                        src="https://www.google.com/images/cleardot.gif" alt="" width="1"
                                        height="1"><span
                                        style="border-left: 1px solid rgb(187, 187, 187);">&#8203;</span><img
                                        src="https://www.google.com/images/cleardot.gif" alt="" width="1"
                                        height="1"><span aria-hidden="true"
                                        style="color: rgb(118, 118, 118);">?</span></a></span></div>
                    </div>
                </div>
            </div>
            <div class="header-container">
                <h1 id="logo">
                    <a href="/" title="Home">
                        <img src="https://www.agendaforhumanity.org/sites/default/files/agendaforhumanity-logo_0_0.png">
                    </a>
                </h1>


                <button id="btn-search" class="icon-search"></button>
                <nav id="navigation" role="navigation" style="padding-top:9px;">
                    <div class="region region-main-menu">
                        <div id="block-system-main-menu">
                            <div class="content">
                                <ul class="menu">
                                    <li class="first leaf"><a href="/">Home</a></li>
                                    <li class="leaf active-trail"><a
                                            href="https://www.agendaforhumanity.org/explore-commitments/stakeholder"
                                            title="">Stakeholders</a></li>
                                    <li class="expanded"><a
                                            href="https://www.agendaforhumanity.org/explore-commitments/indv-commitments"
                                            title="">Commitments</a>
                                        <ul class="menu">
                                            <li class="first leaf"><a
                                                    href="https://www.agendaforhumanity.org/aboutthecommitments">About
                                                    the Commitments</a></li>
                                            <li class="leaf"><a
                                                    href="https://www.agendaforhumanity.org/core-commitments"
                                                    title="">About the Core Commitments</a></li>
                                            <li class="last leaf"><a
                                                    href="https://www.agendaforhumanity.org/explore-commitments/indv-commitments"
                                                    title="">Explore Commitments</a></li>
                                        </ul>
                                    </li>
                                    <li class="expanded"><a
                                            href="https://www.agendaforhumanity.org/explore-commitments/report-search"
                                            title="">Reports</a>
                                        <ul class="menu">
                                            <li class="first leaf"><a
                                                    href="https://www.agendaforhumanity.org/report-guidance"
                                                    title="">Report Guidance</a></li>
                                            <li class="last leaf"><a
                                                    href="https://www.agendaforhumanity.org/explore-commitments/report-search"
                                                    title="">Explore Reports</a></li>
                                        </ul>
                                    </li>
                                    <li class="leaf"><a href="https://www.agendaforhumanity.org/initiatives"
                                            title="">Initiatives</a></li>
                                    <li class="expanded"><a href="https://www.agendaforhumanity.org/resources"
                                            title="">Resources</a>
                                        <ul class="menu">
                                            <li class="first leaf"><a
                                                    href="https://www.agendaforhumanity.org/resources/major-reports#annual-synthesis-reports-2018"
                                                    title="">Annual Synthesis Report 2018</a></li>
                                            <li class="leaf"><a
                                                    href="https://www.agendaforhumanity.org/resources/agendaforhumanity"
                                                    title="">Agenda for Humanity</a></li>
                                            <li class="leaf"><a
                                                    href="https://www.agendaforhumanity.org/resources/major-reports#annual-synthesis-reports-2018"
                                                    title="">Publications</a></li>
                                            <li class="last leaf"><a href="/resources/world-humanitarian-summit"
                                                    title="">World Humanitarian Summit</a></li>
                                        </ul>
                                    </li>
                                    <li class="expanded"><a href="https://www.agendaforhumanity.org/about-us"
                                            title="">About</a>
                                        <ul class="menu">
                                            <li class="first leaf"><a
                                                    href="https://www.agendaforhumanity.org/agendaforhumanity"
                                                    title="">About the Agenda for Humanity</a></li>
                                            <li class="leaf"><a href="https://www.agendaforhumanity.org/about-us"
                                                    title="">About Pact</a></li>
                                            <li class="last leaf"><a href="https://www.agendaforhumanity.org/summit"
                                                    title="">About the World Humanitarian Summit</a></li>
                                        </ul>
                                    </li>
                                    <li class="last leaf"><a href="https://www.agendaforhumanity.org/contact-us"
                                            title="">Contact</a></li>
                                </ul>
                            </div>
                        </div> <!-- /.block -->
                    </div>
                    <!-- /.region -->


                </nav>
            </div>
            <script type="text/javascript">
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({
                        pageLanguage: 'en',
                        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
                    }, 'google_translate_element');
                }
            </script>
            <script type="text/javascript"
                src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
        </header>

        <main>

            <input id="tab5" type="radio" name="tabs" checked>
            <label for="tab5">2019 Visualization</label>

            <input id="tab6" type="radio" name="tabs">
            <label for="tab6">2018 Visualization</label>

            <input id="tab7" type="radio" name="tabs">
            <label for="tab7">2017 Visualization</label>

            <input id="tab8" type="radio" name="tabs">
            <label for="tab8">Inter Year Analysis</label>
            <section id="content3">
                <a data-toggle="modal" class="pdf-button" title="Export to Excel" data-target="#export">
                    <img src="src/img/fa-excel.png" style="width: 50px; padding: 10px;">
                </a>
                <a class="viewer-button pageload-link" href="#page-2" title="Tabular View">
                    <img src="src/img/fa-table.png" style="width: 50px; padding: 10px;">
                </a>
                <a class="accessibility-button" data-toggle="modal" title="Web Accessibility"
                    data-target="#accessibility">
                    <img src="src/img/fa-wheelchair.png" style="width: 50px; padding: 10px;">
                </a>
                <!-- Introduction and Year Selection Section -->
                <div id="introduction" class="introduction-section text-center">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-8 mx-auto ">
                                <h1 class="text mb-4 main_header"></h1>
                                <p class="text-50">The Interactive Summary provides an overview of <span
                                        class="year"></span> reporting by
                                    stakeholders
                                    on implementation of commitments made at or after the World Humanitarian Summit.
                                    Click on the
                                    tabs to explore achievements, challenges and cross-cutting issues by each of the 24
                                    Transformations of the Agenda for Humanity. </p>
                            </div>
                        </div>


<!--
                        <div class="row">
                            <div class="container text-center" style="margin-bottom:120px;">
                                <strong>YEAR: </strong>
                                <div class="dropdown">
                                    <div class="select">
                                        <span>Select Year</span>
                                        <i class="fa fa-chevron-left"></i>
                                    </div>
                                    <input type="hidden" name="gender">
                                    <ul class="dropdown-menu">
                                        <li id="2016">2017</li>
                                        <li id="2017">2018</li>
                                        <li id="2018">2019</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    -->
                    </div>
                </div>
                <div id="content">



                    <div id="protracted-crisis" class="protracted-crisis-section text-center">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-12 mx-auto ">
                                    <h2 class="text mb-4 stakeholder-header" style="padding-top: 20px; "></h2>

                                    <div id="total-stackholder_detail" style="padding-bottom: 50px;"></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-8 mx-auto ">
                                    <h2 class="text mb-4 transformation_header"></h2>
                                    <p class="caption_no_border" data-localize="overview_sources">Click on the
                                        transformation to see details</p>
                                    <p>&nbsp;</p>

                                </div>
                            </div>
                        </div>
                        <div class="block">
                            <div class="row">
                                <div class="block">
                                    <table id="table-transformation">
                                        <thead>
                                            <tr class="header-row">
                                                <td class="country-name"></td>


                                                <td class="percentagebar">
                                                    <span style="float:left;"
                                                        data-localize="funded_text">Transformation</span>

                                                </td>
                                                <td class="percentagefigure">
                                                    <h3></h3>
                                                </td>
                                            </tr>
                                            <tr class="break-row">
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Country lists goes here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>






                        <div class="container">
                            <div class="row">&nbsp;</div>
                            <div class="row">
                                <div class="col-lg-8 mx-auto ">
                                    <h2 class="text mb-4">Stakeholders</h2>
                                </div>
                            </div>
                        </div>

                        <div class="block-other">
                            <div class="row">
                                <div class="col-6">

                                    <h3 class="text mb-4 byregion_header" style="color: #143058 !important;"></h3>
                                    <div id="table-stakeholder-region"></div>
                                </div>


                                <div class="col-6">
                                    <h3 class="text mb-4 byorganisation_header" style="color:#143058 !important;"></h3>
                                    <div id="table-stakeholder-org"></div>
                                </div>
                            </div>
                            <div class="row">&nbsp;</div>
                            <div class="row">
                                <div class="col-lg-8 mx-auto">
                                    <h2 class="text mb-4 crosscuttiong_header" style="margin-bottom: 1.8rem!important;">
                                    </h2>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12 mx-auto">
                                    <div id="crosscutting_table"></div>
                                </div>
                            </div>
                        </div>




                    </div>



















                </div>
            </section>

        </main>


    </div>
    </div>
    <div id="loader" class="pageload-overlay"
        data-opening="m -5,-5 0,70 90,0 0,-70 z m 5,35 c 0,0 15,20 40,0 25,-20 40,0 40,0 l 0,0 C 80,30 65,10 40,30 15,50 0,30 0,30 z">
        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 80 60"
            preserveAspectRatio="none">
            <path
                d="m -5,-5 0,70 90,0 0,-70 z m 5,5 c 0,0 7.9843788,0 40,0 35,0 40,0 40,0 l 0,60 c 0,0 -3.944487,0 -40,0 -30,0 -40,0 -40,0 z" />
        </svg>
    </div>
    </div>

    <!-- MODALS -->

    <!-- Full popup detailed charts -->
    <div class="modal detail-modal modal-wide fade" id="detailVisualization" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="detail">Detail</h3>
                    <div class="close-modal" data-dismiss="modal">
                        <div class="lr">
                            <div class="rl"></div>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div id="sub" class="col-md-6 col-sm-12">
                                <h3 class="subcategory_title popup_title text-center text mb-4"></h3>
                                <div id="selectedd"></div>
                                <div id="chart-subcategory"></div>
                            </div>
                            <div id="actiontakenchart" class="col-md-6 col-sm-12">
                                <h3 class="actiontaken_title popup_title text-center text mb-4"></h3>
                                <div id="chart-action-taken"></div>
                            </div>
                            <div id="actiontakentable" class="col-md-6 col-sm-12">
                                <h3 class="actiontaken_title popup_title text-center text mb-4"></h3>
                                <div id="table-action-taken"></div>
                            </div>
                        </div>
                        <div class="row">&nbsp;</div>
                        <div class="row">
                            <div class="col-md-12 col-sm-12">
                                <h3 class="challenges_title popup_title text-center text mb-4"></h3>
                                <div id="chart-challenge-detail"></div>
                            </div>
                        </div>
                        <div class="row">&nbsp;</div>
                        <div class="row" id="ccidetail">
                            <div class="col-md-12 col-sm-12">
                                <h3 class="popup_title text mb-4 text-center">Cross Cutting Issues</h3>
                                <div id="crosscutting-detail"></div>

                            </div>
                        </div>
                        <div class="row" id="ccidetailtable">
                            <div class="col-md-12 col-sm-12">
                                <h3 class="cci_title popup_title text-left text mb-4"></h3>
                                <div id="table-cci-detail"></div>

                            </div>
                        </div>
                        <div class="row">
                            <div id="searchDetail" style="margin: 0 auto;"></div>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Accessibility Modal -->
    <div class="modal fade" id="accessibility" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Accessibility Options</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <ul class="list-group">
                        <li class="list-group-item"><i class="fas fa fa-adjust text-primary mb-2"></i> <a
                                id="btnHighContrast">High
                                Contrast</a> &nbsp;
                            &nbsp;&nbsp;<i class="fa fa-adjust" aria-hidden="true"></i> <a id="btnNormalContrast">Normal
                                Contrast</a></li>
                        <li class="list-group-item"><i class="fas fa-link text-primary"></i> <a
                                id="btnYellowLinks">Yellow
                                Links</a>
                            &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-link"></i> <a id="btnNormalLinks">Normal
                                Links</a></i></li>
                        <li class="list-group-item"><i class="fas fa fa-barcode text-primary" aria-hidden="true"></i>
                            <a id="btnGreyScale">Grayscale
                                Mode</a> &nbsp;&nbsp;&nbsp;<i class="fa fa-barcode" aria-hidden="true"></i> <a
                                id="btnRegularColor">Regular
                                Mode</a></li>
                        <li class="list-group-item"><i class="fas fa fa-underline text-primary" aria-hidden="true"></i>
                            <a id="btnUnderline">Underline
                                Links</a> &nbsp;&nbsp;&nbsp;<i class="fa fa-underline" aria-hidden="true"></i> <a
                                id="btnDefault">Default
                                Links</a></li>
                        <li class="list-group-item"><i class="fas fa fa-adjust text-primary mb-2"
                                aria-hidden="true"></i>
                            <a id="btnText">Text
                                color contrast
                            </a> &nbsp;&nbsp;&nbsp;<i class="fas fa-adjust" aria-hidden="true"></i> <a
                                id="btnTextNormal">Normal
                                text
                                color
                            </a></li>

                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="export" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Export </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <ul class="list-group">
                        <li class="list-group-item">
                            <input type="radio" id="y1" name="yyear" value="2018" checked> 2019
                            <input type="radio" id="y2" name="yyear" value="2017"> 2018
                            <input type="radio" id="y3" name="yyear" value="2016"> 2017
                        </li>

                        <li class="list-group-item">

                            <table width="100%" style="text-align: left">
                                <tr>
                                    <td style="text-align:left; width: 350px;">
                                        <i class="fas fa-table"></i> Transformation
                                    </td>
                                    <td style="text-align: left">
                                        <a href="javascript:ExportExcel('transformation','excel');"><i
                                                class="far fa-file-excel"></i> Excel</a>



                                    </td>
                                </tr>
                            </table>

                        </li>
                        <li class="list-group-item">
                            <table width="100%" style="text-align: left">
                                <tr>
                                    <td style="text-align:left;width: 350px;">
                                        <i class="fas fa-table"></i> Stakeholder(Region of Operation)
                                    </td>
                                    <td style="text-align: left">
                                        <a href="javascript:ExportExcel('region','excel');"><i
                                                class="far fa-file-excel"></i> Excel</a>
                                    </td>
                                </tr>
                            </table>
                        </li>



                        </li>
                        <li class="list-group-item">
                            <table width="100%" style="text-align: left">
                                <tr>
                                    <td style="text-align:left; width: 350px;">
                                        <i class="fas fa-table"></i> Stakeholder(By type of Organisation)
                                    </td>
                                    <td style="text-align: left">
                                        <a href="javascript:ExportExcel('organisation','excel');"><i
                                                class="far fa-file-excel"></i> Excel</a>
                                    </td>
                                </tr>
                            </table>



                        </li>
                        <li class="list-group-item">
                            <table width="100%" style="text-align: left">
                                <tr>
                                    <td style="text-align:left; width: 350px;">
                                        <i class="fas fa-table"></i> Challenges
                                    </td>
                                    <td style="text-align: left">
                                        <a href="javascript:ExportExcel('challenges','excel');"><i
                                                class="far fa-file-excel"></i> Excel</a>
                                    </td>
                                </tr>
                            </table>


                        </li>
                        <li class="list-group-item">
                            <table>
                                <tr>
                                    <td style="text-align:left; width: 350px;">
                                        <i class="fas fa-table"></i> Cross Cutting Issues
                                    </td>
                                    <td style="text-align: left">
                                        <a href="javascript:ExportExcel('cci','excel');"><i
                                                class="far fa-file-excel"></i> Excel</a>
                                    </td>
                                </tr>
                            </table>

                        </li>
                        <li class="list-group-item"><a class="btn btn-primary" href="javascript:ExportPDF();"><i
                                    class="far fa-file-pdf"></i> Download PDF</a></li>


                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Bootstrap core JavaScript -->
    <script src="src/vendor/jquery/jquery.min.js"></script>
    <script src="src/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="src/vendor/jquery-easing/jquery.easing.min.js"></script>



    <!-- Custom scripts for the ServiceWorker -->


    <!-- Greensock -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.4/TweenMax.min.js"></script>

    <!-- ScrollMagic -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.6/ScrollMagic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.6/plugins/animation.gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/plugins/debug.addIndicators.min.js"></script>

    <!-- D3 -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.0/c3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.6.0/d3.min.js"></script>

    <!-- Load d3-cloud -->
    <script src="https://cdn.jsdelivr.net/gh/holtzy/D3-graph-gallery@master/LIB/d3.layout.cloud.js"></script>

    <!-- Function for radial charts -->
    <script src="https://cdn.jsdelivr.net/gh/holtzy/D3-graph-gallery@master/LIB/d3-scale-radial.js"></script>




    <!-- Frappe Chart -->
    <script src="src/js/spin.js"></script>

    <script src="src/js/tsorter.min.js"></script>

    <!-- Numeral JS-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>





    <!--Scroll Magic-->
    <script>
        $(document).ready(function () {
            document.getElementById("asof").innerHTML = "* as of <strong>" + (new Date()).toString().split(' ')
                .splice(1, 3).join(' ') + "</strong>";

            $('#titles').html(
                "<span>Inter Year Analysis</span>");


        });
        // init ScrollMagic
        $(document).ready(function () {
            var controller = new ScrollMagic.Controller();
            // fade in items
            $('.scroll-fade-content').each(function () {
                var fadeIn = new ScrollMagic.Scene({
                        triggerElement: this.children[0],
                        triggerHook: 0.8,
                        duration: "100%"
                    })
                    .setClassToggle(this, 'fade-in')
                    .addTo(controller);
            });
        });
    </script>

    <!-- Accessibility Script-->
    <script>
        document.getElementById('btnHighContrast').addEventListener('click', function () {

            $("<link/>", {
                rel: "stylesheet",
                type: "text/css",
                href: "src/css/high-contrast.css",
                title: "underline"
            }).appendTo("head");
        });
        document.getElementById('btnYellowLinks').addEventListener('click', function () {
            $("<link/>", {
                rel: "stylesheet",
                type: "text/css",
                href: "src/css/yellow-links.css",
                title: "underline"
            }).appendTo("head");
        });
        document.getElementById('btnUnderline').addEventListener('click', function () {
            $("<link/>", {
                rel: "stylesheet",
                type: "text/css",
                href: "src/css/underline-links.css",
                title: "underline"
            }).appendTo("head");
        });
        document.getElementById('btnText').addEventListener('click', function () {
            $("<link/>", {
                rel: "stylesheet",
                type: "text/css",
                href: "src/css/text-color-contrast.css",
                title: "underline"
            }).appendTo("head");
        });


        document.getElementById('btnDefault').addEventListener('click', function () {
            $("LINK[href*='src/css/underline-links.css']").remove();
        });
        document.getElementById('btnGreyScale').addEventListener('click', function () {
            $("<link/>", {
                rel: "stylesheet",
                type: "text/css",
                href: "src/css/greyscale.css",
                title: "underline"
            }).appendTo("head");
        });
        document.getElementById('btnRegularColor').addEventListener('click', function () {
            $("LINK[href*='src/css/greyscale.css']").remove();
        });

        document.getElementById('btnNormalContrast').addEventListener('click', function () {
            $("LINK[href*='src/css/high-contrast.css']").remove();
        });
        document.getElementById('btnTextNormal').addEventListener('click', function () {
            $("LINK[href*='src/css/text-color-contrast.css']").remove();
        });
        document.getElementById('btnNormalLinks').addEventListener('click', function () {
            $("LINK[href*='css/yellow-links.css']").remove();
        });
    </script>
    <script>
        function PopulateStackholderTotal2017(year) {

            var target = document.getElementById('total-stackholder-2016');
            var spinner = new Spinner(opts).spin(target);


            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/total.php', function (crises) {
                spinner.stop();

                var total = ['Total'],
                    reportingYear = ['ReportingYear'];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        total.push(Number(element['Total']));
                    }
                });


                if (total.length > 0 && total[1] != undefined) {
                    $("#total-stackholder-2016").fadeIn(1000);

                    $('#total-stackholder-2016').html(total[1]);




                } else {

                    $('#total-stackholder-2016').fadeOut(1000);

                }
            });
        }

        function PopulateStackholderTotal2018(year) {

            var target = document.getElementById('total-stakeholder-2017');
            var spinner = new Spinner(opts).spin(target);


            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/total.php', function (crises) {
                spinner.stop();

                var total = ['Total'],
                    reportingYear = ['ReportingYear'];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        total.push(Number(element['Total']));
                    }
                });


                if (total.length > 0 && total[1] != undefined) {
                    $("#total-stackholder-2017").fadeIn(1000);

                    $('#total-stakeholder-2017').html(

                        total[1]);




                } else {

                    $('#total-stakeholder-2017').fadeOut(1000);

                }
            });
        }

        function PopulateStackholderTotal2019(year) {

            var target = document.getElementById('total-stakeholder-2018');
            var spinner = new Spinner(opts).spin(target);


            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/total.php', function (crises) {
                spinner.stop();

                var total = ['Total'],
                    reportingYear = ['ReportingYear'];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        total.push(Number(element['Total']));
                    }
                });


                if (total.length > 0 && total[1] != undefined) {
                    $("#total-stackholder-2018").fadeIn(1000);

                    $('#total-stakeholder-2018').html(

                        total[1]);




                } else {

                    $('#total-stakeholder-2018').fadeOut(1000);

                }
            });
        }
    </script>

    <script>
        var subcategory_chart;
        var challenge_chart;
        var actiontaken_chart;

        var chart_reported_2016;
        var chart_reported_2017;
        var chart_reported_2018;
        var stakeholder;
        var transforms;
        var chal;
        var chart_transformation_comps;
        var chart_region;
        var chart_org;

        var chart_stakeholder_line;

        function PopulateReportStatusDashboard2016(year, dom) {


            news = "https://www.agendaforhumanity.org/viz_endpoint/dashboard/get.php";
            var target = document.getElementById(dom);
            var spinner = new Spinner(opts).spin(target);
            d3.json(news, function (error, data) {
                spinner.stop();
                if (error) {
                    // console.error('Error getting or parsing the data.');
                    throw error;
                }
                var reported = ['Reported'],
                    notreported = ['Not reported'];
                data.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        reported.push([Number(element['Reported'])]);
                        notreported.push([Number(element['NotReported'])]);
                    }

                });
                //  console.log(reported);
                if (reported.length > 1) {

                    $("#" + dom).fadeIn(1000);

                    chart_reported_2016 = c3.generate({
                        bindto: '#' + dom,
                        data: {

                            columns: [reported, notreported],
                            type: 'donut',
                        },
                        color: {
                            pattern: ['#2CA02C', '#F7A600']
                        },
                        donut: {
                            label: {
                                format: function (value, ratio, id) {
                                    return d3.format('')(value);
                                }
                            },
                            title: 
                                "358 total stakeholders 2017"
                                
                             
                                
                        },
                        legend: {
                            show: false
                        },
                        tooltip: {
                            format: {
                                value: function (value, ratio, id) {
                                    return (value);
                                }
                            }
                        }



                    });
                } else {
                    $("#" + dom).fadeOut(1000);
                }
            })
        }

        function PopulateReportStatusDashboard2017(year, dom) {


            news = "https://www.agendaforhumanity.org/viz_endpoint/dashboard/get.php";
            var target = document.getElementById(dom);
            var spinner = new Spinner(opts).spin(target);
            d3.json(news, function (error, data) {
                spinner.stop();
                if (error) {
                    // console.error('Error getting or parsing the data.');
                    throw error;
                }
                var reported = ['Reported'],
                    notreported = ['Not reported'];
                data.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        reported.push([Number(element['Reported'])]);
                        notreported.push([Number(element['NotReported'])]);
                    }

                });
                //  console.log(reported);
                if (reported.length > 1) {

                    $("#" + dom).fadeIn(1000);

                    chart_reported_2017 = c3.generate({
                        bindto: '#' + dom,
                        data: {

                            columns: [reported, notreported],
                            type: 'donut',
                        },
                        color: {
                            pattern: ['#2CA02C', '#F7A600']
                        },
                        donut: {
                            label: {
                                format: function (value, ratio, id) {
                                    return d3.format('')(value);
                                }
                            },
                            title: "366 total stakeholders 2018",
                        },
                        legend: {
                            show: false
                        },
                        tooltip: {
                            format: {
                                value: function (value, ratio, id) {
                                    return (value);
                                }
                            }
                        }



                    });
                } else {
                    $("#" + dom).fadeOut(1000);
                }
            })
        }

        function PopulateReportStatusDashboard2018(year, dom) {


            news = "https://www.agendaforhumanity.org/viz_endpoint/dashboard/get.php";
            var target = document.getElementById(dom);
            var spinner = new Spinner(opts).spin(target);
            d3.json(news, function (error, data) {
                spinner.stop();
                if (error) {
                    // console.error('Error getting or parsing the data.');
                    throw error;
                }
                var reported = ['Reported'],
                    notreported = ['Not reported'];
                data.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        reported.push([Number(element['Reported'])]);
                        notreported.push([Number(element['NotReported'])]);
                    }

                });
                //  console.log(reported);
                if (reported.length > 1) {

                    $("#" + dom).fadeIn(1000);

                    chart_reported_2018 = c3.generate({
                        bindto: '#' + dom,
                        data: {

                            columns: [reported, notreported],
                            type: 'donut',
                        },
                        color: {
                            pattern: ['#2CA02C', '#F7A600']
                        },
                        donut: {
                            label: {
                                format: function (value, ratio, id) {
                                    return d3.format('')(value);
                                }
                            },
                            title: "366 total stakeholders 2019",
                        },
                        legend: {
                            show: false
                        },
                        tooltip: {
                            format: {
                                value: function (value, ratio, id) {
                                    return (value);
                                }
                            }
                        }



                    });
                } else {
                    $("#" + dom).fadeOut(1000);
                }
            })
        }


        function PopulateStokeHolderBar() {
            var target = document.getElementById('chart-stakeholder-bar');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/organization.php', function (
                crises) {
                spinner.stop();
                var stakeHolders = ['Stakeholder'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];

                var countsData = [
                    ['2017'],
                    ['2018'],
                    ['2019']
                ];

                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Academia') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Faith-based Organisation') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Foundation') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'International Organisation') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Member State') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'NGO - International') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'NGO - National') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] == 'Other') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Private Sector') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Regional Organisation') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] == 'UN') {
                        countsData[0].push(element['Total']);
                    }



                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Academia') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Faith-based Organisation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Foundation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'International Organisation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Member State') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'NGO - International') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'NGO - National') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] == 'Other') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Private Sector') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Regional Organisation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] == 'UN') {
                        countsData[1].push(element['Total']);
                    }




                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Academia') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Faith-based Organisation') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Foundation') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'International Organisation') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Member State') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'NGO - International') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'NGO - National') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] == 'Other') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Private Sector') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Regional Organisation') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] == 'UN') {
                        countsData[2].push(element['Total']);
                    }





                });

                var categoriesList = ['Academia', 'Faith-based Organisation', 'Foundation',
                    'International Organisation', 'Member State', 'NGO - International',
                    'NGO - National', 'Other', 'Private Sector', 'Regional Organisation', 'UN'
                ];

                $("#chart-stakeholder").fadeIn(1000);
                stakholder = c3.generate({
                    bindto: '#chart-stakeholder-bar',
                    data: {

                        type: 'bar',
                        columns: countsData,
                        labels: true,
                    },
                    legend: {
                        show: true
                    },
                    types: {
                        data: 'bar'
                    },


                    color: {
                        pattern: ["#00B1EB", "#51AF32", "#E84E0F"]
                    },
                    axis: {
                        rotated: false,
                        x: {
                            type: 'category',
                            categories: categoriesList
                        },
                    },
                    size: {
                        height: 350
                    },
                    padding: {
                        left: 100,
                        right: 10
                    }
                });


            });
        }

        function PopulateStakholderLine(year) {
            var total2016, total2017, total2018;

            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/total.php', function (crises) {

                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == "2016") {
                        total2016 = element['Total'];

                    } else if (element['ReportingYear'] == "2017") {
                        total2017 = element['Total'];
                    } else if (element['ReportingYear'] == "2018") {
                        total2018 = element['Total'];
                    }
                });

                var target = document.getElementById('chart-stakeholder-line');
                var spinner = new Spinner(opts).spin(target);
                d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/organization.php',
                    function (
                        crises) {
                        spinner.stop();


                        var countsData = [
                            ['2017'],
                            ['2018'],
                            ['2019']
                        ];

                        crises.forEach(function (element, index) {
                            if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                                'Academia') {
                                let per = (element['Total'] * 100) / total2016;
                                countsData[0].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                                'Faith-based Organisation') {
                                let per = (element['Total'] * 100) / total2016;
                                countsData[0].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                                'Foundation') {
                                let per = (element['Total'] * 100) / total2016;
                                countsData[0].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                                'International Organisation') {
                                let per = (element['Total'] * 100) / total2016;
                                countsData[0].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                                'Member State') {
                                let per = (element['Total'] * 100) / total2016;
                                countsData[0].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                                'NGO - International') {
                                let per = (element['Total'] * 100) / total2016;
                                countsData[0].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                                'NGO - National') {
                                let per = (element['Total'] * 100) / total2016;
                                countsData[0].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                                'Other') {
                                let per = (element['Total'] * 100) / total2016;
                                countsData[0].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                                'Private Sector') {
                                let per = (element['Total'] * 100) / total2016;
                                countsData[0].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                                'Regional Organisation') {
                                let per = (element['Total'] * 100) / total2016;
                                countsData[0].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                                'UN') {
                                let per = (element['Total'] * 100) / total2016;
                                countsData[0].push(per.toFixed(1));
                            }



                            if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                                'Academia') {
                                let per = (element['Total'] * 100) / total2017;
                                countsData[1].push(per.toFixed(1));


                            }
                            if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                                'Faith-based Organisation') {
                                let per = (element['Total'] * 100) / total2017;
                                countsData[1].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                                'Foundation') {
                                let per = (element['Total'] * 100) / total2017;
                                countsData[1].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                                'International Organisation') {
                                let per = (element['Total'] * 100) / total2017;
                                countsData[1].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                                'Member State') {
                                let per = (element['Total'] * 100) / total2017;
                                countsData[1].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                                'NGO - International') {
                                let per = (element['Total'] * 100) / total2017;
                                countsData[1].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                                'NGO - National') {
                                let per = (element['Total'] * 100) / total2017;
                                countsData[1].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                                'Other') {
                                let per = (element['Total'] * 100) / total2017;
                                countsData[1].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                                'Private Sector') {
                                let per = (element['Total'] * 100) / total2017;
                                countsData[1].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                                'Regional Organisation') {
                                let per = (element['Total'] * 100) / total2017;
                                countsData[1].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                                'UN') {
                                let per = (element['Total'] * 100) / total2017;
                                countsData[1].push(per.toFixed(1));
                            }




                            if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                                'Academia') {
                                let per = (element['Total'] * 100) / total2018;
                                countsData[2].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                                'Faith-based Organisation') {
                                let per = (element['Total'] * 100) / total2018;
                                countsData[2].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                                'Foundation') {
                                let per = (element['Total'] * 100) / total2018;
                                countsData[2].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                                'International Organisation') {
                                let per = (element['Total'] * 100) / total2018;
                                countsData[2].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                                'Member State') {
                                let per = (element['Total'] * 100) / total2018;
                                countsData[2].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                                'NGO - International') {
                                let per = (element['Total'] * 100) / total2018;
                                countsData[2].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                                'NGO - National') {
                                let per = (element['Total'] * 100) / total2018;
                                countsData[2].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                                'Other') {
                                let per = (element['Total'] * 100) / total2018;
                                countsData[2].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                                'Private Sector') {
                                let per = (element['Total'] * 100) / total2018;
                                countsData[2].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                                'Regional Organisation') {
                                let per = (element['Total'] * 100) / total2018;
                                countsData[2].push(per.toFixed(1));
                            }
                            if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                                'UN') {
                                let per = (element['Total'] * 100) / total2018;
                                countsData[2].push(per.toFixed(1));
                            }





                        });

                        var categoriesList = ['Academia', 'Faith-based Organisation', 'Foundation',
                            'International Organisation', 'Member State', 'NGO - International',
                            'NGO - National', 'Other', 'Private Sector', 'Regional Organisation', 'UN'
                        ];
                      //  console.log(countsData);
                        $("#chart-stakeholder-line").fadeIn(1000);
                        chart_stakeholder_line = c3.generate({
                            bindto: '#chart-stakeholder-line',
                            data: {

                                type: 'line',
                                columns: countsData,
                                labels: false,
                            },
                            legend: {
                                show: true
                            },
                            types: {
                                data: 'bar'
                            },


                            color: {

                                pattern: ["#00B1EB", "#51AF32", "#E84E0F"]
                            },
                            axis: {
                                rotated: false,
                                x: {
                                    type: 'category',
                                    categories: categoriesList
                                },
                            },
                            size: {
                                height: 350
                            },
                            padding: {
                                left: 100,
                                right: 10
                            },
                            tooltip: {
                                format: {

                                    value: function (value, ratio, id) {

                                        return value + "%";
                                    }

                                }
                            }
                        });


                    });



            });






        }


        function PopulateTransformationComparision(year) {
            var total2016, total2017, total2018;

            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/total.php', function (crises) {

                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == "2016") {
                        total2016 = element['Total'];

                    } else if (element['ReportingYear'] == "2017") {
                        total2017 = element['Total'];
                    } else if (element['ReportingYear'] == "2018") {
                        total2018 = element['Total'];
                    }
                });

                var target = document.getElementById('chart_transformation_comp');
                var spinner = new Spinner(opts).spin(target);
                var tran = [];
               // console.log(total2018);
                d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (
                    crises) {
                    spinner.stop();
                    var a1 = ['1A'];
                    var transformation_short = ['Transformation_Short'];
                    var total = ['Total'];
                    var transformation_long = ['Transformation_Long'];

                    var countsData = [
                        ['2017'],
                        ['2018'],
                        ['2019']
                    ];

                    crises.forEach(function (element, index) {
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '1A') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));

                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '1A') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));

                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '1A') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));

                        }

                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '1B') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));

                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '1B') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));

                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '1B') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));

                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '1C') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '1C') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '1C') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '1D') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '1D') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '1D') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '2A') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '2A') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '2A') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '2B') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '2B') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '2B') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '2C') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '2C') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '2C') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '2D') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '2D') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '2D') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '2E') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '2E') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '2E') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '3A') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '3A') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '3A') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '3B') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '3B') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '3B') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '3C') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '3C') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '3C') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '3D') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '3D') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '3D') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '3E') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '3E') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '3E') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '3F') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '3F') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '3F') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '3G') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '3G') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '3G') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '4A') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '4A') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '4A') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '4B') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '4B') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '4B') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '4C') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '4C') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '4C') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '5A') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '5A') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '5A') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '5B') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '5B') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '5B') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '5C') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '5C') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '5C') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '5D') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '5D') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '5D') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }
                        if (element['ReportingYear'] == '2016' && element[
                                'Transformation_Short'] ==
                            '5E') {
                            let per = (element['Total'] * 100) / total2016;
                            countsData[0].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2017' && element[
                                'Transformation_Short'] == '5E') {
                            let per = (element['Total'] * 100) / total2017;
                            countsData[1].push(per.toFixed(1));
                        } else if (element['ReportingYear'] == '2018' && element[
                                'Transformation_Short'] == '5E') {
                            let per = (element['Total'] * 100) / total2018;
                            countsData[2].push(per.toFixed(1));
                        }

                    });

                    var categoriesList = ['1A', '1B', '1C', '1D', '2A', '2B', '2C', '2D', '2E', '3A',
                        '3B',
                        '3C', '3D', '3E', '3F', '3G', '4A', '4B', '4C', '5A', '5B', '5C', '5D', '5E'
                    ];

                    chart_transformation_comps = c3.generate({
                        bindto: '#chart_transformation_comp',
                        data: {

                            columns: countsData,
                            labels: true,
                            type: 'line',
                            padding: {
                                left: 60
                            },


                        },
                        color: {
                            pattern: ["#00B1EB", "#51AF32", "#E84E0F"]
                        },
                        axis: {
                            rotated: false,
                            x: {
                                type: 'category',
                                categories: categoriesList
                            },
                            y: {
                                show: false
                            }
                        },
                        tooltip: {
                            format: {
                                title: function (d) {
                                    if (d === 0) {
                                        return '1A - Demonstrate timely, coherent and decisive political leadership';
                                    } else if (d === 1) {
                                        return '1B - Act early';
                                    } else if (d === 2) {
                                        return '1C - Remain engaged and invest in stability';

                                    } else if (d === 3) {
                                        return '1D - Develop solutions with and for people';

                                    } else if (d === 4) {

                                        return '2A - Respect and protect civilians and civilian objects in the conduct of hostilities';
                                    } else if (d === 5) {
                                        return '2B - Ensure full access to and protection of the humanitarian and medical missions';

                                    } else if (d === 6) {
                                        return '2C - Speak out on violations';

                                    } else if (d === 7) {
                                        return '2D - Take concrete steps to improve compliance and accountability';

                                    } else if (d === 8) {
                                        return '2E - Uphold the rules: a global campaign to affirm the norms that safeguard humanity';

                                    } else if (d === 9) {
                                        return '3A - Reduce and address displacement';

                                    } else if (d === 10) {
                                        return '3B - Address the vulnerabilities of migrants and provide more regular and lawful opportunities for migration';

                                    } else if (d === 11) {
                                        return '3C - End statelessness in the next decade';

                                    } else if (d === 12) {
                                        return '3D - Empower and protect women and girls';

                                    } else if (d === 13) {
                                        return '3E - Eliminate gaps in education for children, adolescents and young people';

                                    } else if (d === 14) {
                                        return '3F - Enable adolescents and young people to be agents of positive transformation';

                                    } else if (d === 15) {
                                        return '3G - Address other groups or minorities in crisis settings';

                                    } else if (d === 16) {
                                        return '4A - Reinforce, do not replace, national and local systems';

                                    } else if (d === 17) {
                                        return '4B - Anticipate, do not wait, for crises';

                                    } else if (d === 18) {
                                        return '4C - Deliver collective outcomes: transcend humanitarian-development divides';

                                    } else if (d === 19) {
                                        return '5A - Invest in local capacities';

                                    } else if (d === 20) {
                                        return '5B - Invest according to risk';

                                    } else if (d === 21) {
                                        return '5C - Invest in stability';

                                    } else if (d === 22) {
                                        return '5D - Finance outcomes, not fragmentation: shift from funding to financing';

                                    } else if (d === 23) {
                                        return '5E - Diversify the resource base and increase cost-efficiency';
                                    }





                                },

                                value: function (value, ratio, id) {

                                    return value + "%";
                                }

                            }
                        }
                    });



                });



            });






        }



        function PopulateTransformationBar() {
            var target = document.getElementById('chart-transformation-bar');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (crises) {
                spinner.stop();
                var a1 = ['1A'];
                var transformation_short = ['Transformation_Short'];
                var total = ['Total'];
                var transformation_long = ['Transformation_Long'];

                var countsData = [
                    ['2017'],
                    ['2018'],
                    ['2019']
                ];

                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1A') {
                        countsData[2].push(element['Total']);
                    }

                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2E') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2E') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2E') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3E') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3E') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3E') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3F') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3F') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3F') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3G') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3G') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3G') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '4A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '4A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '4A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '4B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '4B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '4B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '4C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '4C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '4C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5E') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5E') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5E') {
                        countsData[2].push(element['Total']);
                    }

                });

                var categoriesList = ['1A', '1B', '1C', '1D', '2A', '2B', '2C', '2D', '2E', '3A', '3B',
                    '3C', '3D', '3E', '3F', '3G', '4A', '4B', '4C', '5A', '5B', '5C', '5D', '5E'
                ];

                transforms = c3.generate({
                    bindto: '#chart-transformation-bar',
                    data: {

                        columns: countsData,
                        labels: true,
                        type: 'bar',
                        padding: {
                            left: 60
                        },


                    },
                    color: {
                        pattern: ["#00B1EB", "#51AF32", "#E84E0F"]
                    },
                    axis: {
                        rotated: false,
                        x: {
                            type: 'category',
                            categories: categoriesList
                        },
                        y: {
                            show: false
                        }
                    },
                    tooltip: {
                        format: {
                            title: function (d) {
                                if (d === 0) {
                                    return '1A - Demonstrate timely, coherent and decisive political leadership';
                                } else if (d === 1) {
                                    return '1B - Act early';
                                } else if (d === 2) {
                                    return '1C - Remain engaged and invest in stability';

                                } else if (d === 3) {
                                    return '1D - Develop solutions with and for people';

                                } else if (d === 4) {

                                    return '2A - Respect and protect civilians and civilian objects in the conduct of hostilities';
                                } else if (d === 5) {
                                    return '2B - Ensure full access to and protection of the humanitarian and medical missions';

                                } else if (d === 6) {
                                    return '2C - Speak out on violations';

                                } else if (d === 7) {
                                    return '2D - Take concrete steps to improve compliance and accountability';

                                } else if (d === 8) {
                                    return '2E - Uphold the rules: a global campaign to affirm the norms that safeguard humanity';

                                } else if (d === 9) {
                                    return '3A - Reduce and address displacement';

                                } else if (d === 10) {
                                    return '3B - Address the vulnerabilities of migrants and provide more regular and lawful opportunities for migration';

                                } else if (d === 11) {
                                    return '3C - End statelessness in the next decade';

                                } else if (d === 12) {
                                    return '3D - Empower and protect women and girls';

                                } else if (d === 13) {
                                    return '3E - Eliminate gaps in education for children, adolescents and young people';

                                } else if (d === 14) {
                                    return '3F - Enable adolescents and young people to be agents of positive transformation';

                                } else if (d === 15) {
                                    return '3G - Address other groups or minorities in crisis settings';

                                } else if (d === 16) {
                                    return '4A - Reinforce, do not replace, national and local systems';

                                } else if (d === 17) {
                                    return '4B - Anticipate, do not wait, for crises';

                                } else if (d === 18) {
                                    return '4C - Deliver collective outcomes: transcend humanitarian-development divides';

                                } else if (d === 19) {
                                    return '5A - Invest in local capacities';

                                } else if (d === 20) {
                                    return '5B - Invest according to risk';

                                } else if (d === 21) {
                                    return '5C - Invest in stability';

                                } else if (d === 22) {
                                    return '5D - Finance outcomes, not fragmentation: shift from funding to financing';

                                } else if (d === 23) {
                                    return '5E - Diversify the resource base and increase cost-efficiency';
                                }





                            },

                            //value: d3.format(',') // apply this format to both y and y2
                        }
                    }
                });



            });

        }

        function PopulateChallengesBar() {
            var target = document.getElementById('chart-challenge-bar');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/challenges/get.php', function (crises) {
                spinner.stop();


                var countsData = [
                    ['2018'],
                    ['2019']
                ];

                crises.forEach(function (element, index) {




                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Buy-in') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Coordination') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Data') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Field or access') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Funding') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Funding modalities') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Gender') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Hum-dev nexus') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Human resources') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] == 'IHL') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Info-management') {
                        countsData[0].push(element['Total']);
                    }

                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Internal constraints') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'National or local systems') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Other') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Preparedness') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['ChallengesShortCode'] ==
                        'Standards') {
                        countsData[0].push(element['Total']);
                    }




                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Buy-in') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Coordination') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Data') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Field or access') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Funding') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Funding modalities') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Gender') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Hum-dev nexus') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Human resources') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] == 'IHL') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Info-management') {
                        countsData[1].push(element['Total']);
                    }

                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Internal constraints') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'National or local systems') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Other') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Preparedness') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['ChallengesShortCode'] ==
                        'Standards') {
                        countsData[1].push(element['Total']);
                    }


                });

                var categoriesList = ['Buy-in', 'Coordination', 'Data', 'Field or access', 'Funding',
                    'Funding modalities', 'Gender', 'Hum-dev nexus', 'Human resources', 'IHL',
                    'Info-management', 'Internal constraints', 'National or local systems', 'Other',
                    'Preparedness', 'Standards'
                ];

                $("#chart-challenge").fadeIn(1000);
                chal = c3.generate({
                    bindto: '#chart-challenge-bar',
                    data: {

                        type: 'bar',
                        columns: countsData,
                        labels: true,
                    },
                    legend: {
                        show: true
                    },
                    types: {
                        data: 'bar'
                    },


                    color: {
                        pattern: ["#51AF32", "#E84E0F"]
                    },
                    axis: {
                        rotated: false,
                        x: {
                            type: 'category',
                            categories: categoriesList
                        },
                    },
                    size: {
                        height: 350
                    },
                    padding: {
                        left: 100,
                        right: 10
                    }
                });


            });
        }
    </script>
    <script>
        window.subcat = '';

        var defaultYear = 2018;
        var opts = {
            lines: 9, // The number of lines to draw
            length: 9, // The length of each line
            width: 5, // The line thickness
            radius: 14, // The radius of the inner circle
            color: '#002840', // #rgb or #rrggbb or array of colors
            speed: 1.9, // Rounds per second
            trail: 40, // Afterglow percentage
            className: 'spinner', // The CSS class to assign to the spinner
        };

        PopulateStokeHolder(defaultYear);
        PopulateStokeHolderRegion(defaultYear);
        PopulateTransformation(defaultYear);
        PopulateTransformationTable(defaultYear);
        PopulateTransformationMobileTable(defaultYear);
        PopulateStackholderTotal(defaultYear);
        PopulateHeader(defaultYear);
        PopulateCrossCuttingIssues(defaultYear);
        PopulateCrossCuttingIssueTable(defaultYear);
        PopulateChallenge(defaultYear);
        PopulateStokeHolderTable(defaultYear);
        PopulateStokeHolderRegionTable(defaultYear);
        PopulateStokeHolderBar();
        PopulateTransformationBar();

        PopulateTransformationComparision("2016");
        PopulateTransformationComparision("2017");
        PopulateTransformationComparision("2018");

        PopulateStakholderLine("2016");
        PopulateStakholderLine("2017");
        PopulateStakholderLine("2018");


        PopulateChallengesBar();
        PopulateStackholderTotal2017(2016);
        PopulateStackholderTotal2018(2017);
        PopulateStackholderTotal2019(2018);

        PopulateReportStatusDashboard2016(2016, "charts_reported_2016");
        PopulateReportStatusDashboard2017(2017, "charts_reported_2017");
        PopulateReportStatusDashboard2018(2018, "charts_reported_2018");


        function PopulateStokeHolder(year) {
            var target = document.getElementById('chart-stakeholder');
            var spinner = new Spinner(opts).spin(target);
            // console.log(year);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/organization.php', function (crises) {
                spinner.stop();
                var stakeHolders = ['StakeHolders'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        // console.log(element['ReportingYear']);
                        stakeHolders.push(element['Stakeholder']);
                        total.push(Number(element['Total']));
                        reportingYear.push(element['ReportingYear']);
                    }

                });
                //console.log(reportingYear);
                //console.log(stakeHolders.length && total.length);
                if (stakeHolders.length > 1 && total.length) {

                    $("#chart-stakeholder").fadeIn(1000);
                    chart_org = c3.generate({
                        bindto: '#chart-stakeholder',
                        data: {
                            x: 'StakeHolders',
                            type: 'bar',
                            columns: [stakeHolders, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },

                        groups: [
                            stakeHolders, total
                        ],
                        color: {
                            pattern: ["#002840"]
                        },
                        axis: {
                            rotated: true,
                            x: {
                                type: 'category'
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 100,
                            right: 10
                        }
                    });
                } else {
                    $("#chart-stakeholder").fadeOut(1000);

                }

            });
        }

        function PopulateStokeHolderRegion(year) {
            var target = document.getElementById('chart-stakeholder-region');
            var spinner = new Spinner(opts).spin(target);
            // console.log(year);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/region.php', function (crises) {
                spinner.stop();
                var stakeHolders = ['StakeHolders'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        // console.log(element['ReportingYear']);
                        stakeHolders.push(element['Stakeholder']);
                        total.push(Number(element['Total']));
                        reportingYear.push(element['ReportingYear']);
                    }

                });
                //console.log(reportingYear);
                //console.log(stakeHolders.length && total.length);
                if (stakeHolders.length > 1 && total.length) {

                    $("#chart-stakeholder-region").fadeIn(1000);
                    chart_region = c3.generate({
                        bindto: '#chart-stakeholder-region',
                        data: {
                            x: 'StakeHolders',
                            type: 'bar',
                            columns: [stakeHolders, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },
                        groups: [
                            stakeHolders, total
                        ],
                        color: {
                            pattern: ["#002840"]
                        },
                        axis: {
                            rotated: true,
                            x: {
                                type: 'category'
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 100,
                            right: 10
                        }
                    });
                } else {
                    $("#chart-stakeholder-region").fadeOut(1000);

                }

            });
        }

        function filterJSON(json, key) {

            var result = [];
            if (key)
                result = json.filter(function (item) {
                    return item.ReportingYear == key
                });

            return result;
        }


        function PopulateTransformation(year) {

            var target = document.getElementById('chart-transformation');
            var spinner = new Spinner(opts).spin(target);
          
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (error, data) {
                spinner.stop();
                if (error) {
                    throw error;
                }
                var transformation_short = ['Transformation_Short'],
                    total = ['Total'],
                    transformation_long = ['Transformation_Long'];

                data.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        transformation_short.push(element['Transformation_Short']);
                        total.push(Number(element['Total']));
                        transformation_long.push(element['Transformation_Long']);
                    }
                });
                if (transformation_short.length > 1 && total.length) {
                    $("#chart-transformation").fadeIn(1000);

                    var filtered = filterJSON(data, year);


                    PopulateMainChart(filtered);
                } else {
                    $("#chart-transformation").fadeOut(1000);
                }
            });
        }

        function PopulateSearch(core, transformation, reportingYear, color) {





            if ($("#selectedd").html() != "" && $("#selectedd").html() != null) {
                var searchUrl =
                    'https://www.agendaforhumanity.org/explore-commitments/report-search?search_area=' + $("#selectedd")
                    .html() + '&reporting_year[' + reportingYear + ']=' + reportingYear + '&transformation_cr1[' +
                    transformation + ']=' + transformation;
                var downloadUrl =
                    'https://www.agendaforhumanity.org/download-annual-report?search_area=' + $("#selectedd").html() +
                    '&reporting_year[' + reportingYear + ']=' + reportingYear + '&transformation_cr1[' +
                    transformation + ']=' + transformation;


                $('#searchDetail').html($('<a class="btn btn-primary" style="background-color: ' + color +
                    '; text-decoration:none;" target="_blank" href="' + searchUrl +
                    '"><i class="fas fa-search-plus"></i>View Reports</a>&nbsp;&nbsp;<a class="btn btn-primary" style="background-color: ' +
                    color +
                    '; text-decoration:none;" target="_blank" href="' + downloadUrl +
                    '"><i class="fas fa-table"></i>Download Excel</a>'));
            } else {
                var searchUrl =
                    'https://www.agendaforhumanity.org/explore-commitments/report-search?reporting_year[' +
                    reportingYear + ']=' + reportingYear + '&transformation_cr1[' + transformation + ']=' +
                    transformation;

                var downloadUrl =
                    'https://www.agendaforhumanity.org/download-annual-report?reporting_year[' + reportingYear + ']=' +
                    reportingYear + '&transformation_cr1[' + transformation + ']=' + transformation;



                $('#searchDetail').html($('<a class="btn btn-primary" style="background-color: ' + color +
                    '; text-decoration:none;" target="_blank" href="' + searchUrl +
                    '"><i class="fas fa-search-plus"></i>View Reports</a>&nbsp;&nbsp;<a class="btn btn-primary" style="background-color: ' +
                    color +
                    '; text-decoration:none;" target="_blank" href="' + downloadUrl +
                    '"><i class="fas fa-table"></i>Download Excel</a>'));
            }






        }

        function PopulateChallengeDetail(transformation, year, colorname) {
            var target = document.getElementById('chart-challenge-detail');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/challenges/detail.php', function (crises) {
                spinner.stop();
                var transformation_short = ['Transformation_Short'],

                    challengesShortCode = ['ChallengesShortCode'],
                    reportingYear = ['ReportingYear'],
                    total = ['Total'];
                crises.forEach(function (element, index) {
                    if (element['Transformation_Short'] == transformation && element['ReportingYear'] ==
                        year) {

                        challengesShortCode.push([element['ChallengesShortCode']]);
                        total.push(Number(element['Total']));
                    }
                });
                if (challengesShortCode.length > 1 && total.length > 1) {
                    $(".challenges_title").show();
                    $(".challenges_title").html("Challenges");
                    $("#chart-challenge-detail").fadeIn(1000);
                    challenge_chart = c3.generate({
                        bindto: '#chart-challenge-detail',
                        data: {
                            x: 'ChallengesShortCode',
                            type: 'bar',
                            columns: [challengesShortCode, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },

                        groups: [
                            challengesShortCode, total
                        ],
                        color: {
                            pattern: [colorname]
                        },
                        axis: {
                            x: {
                                type: 'category',
                                tick: {
                                    rotate: 75,
                                    multiline: true
                                }
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 10,
                            right: 10
                        },
                    });
                } else {
                    $(".challenges_title").hide();
                    $("#chart-challenge-detail").fadeOut(1000);
                }
            });
        }

        function PopulateActionTakenDetail(transformation, year, colorname) {
            var target = document.getElementById('chart-action-taken');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/actiontaken/get.php', function (crises) {
                spinner.stop();
                var transformation_short = ['Transformation_Short'],
                    actoion_type = ['ActionTaken'],
                    reportingYear = ['ReportingYear'],
                    total = ['Total'];
                crises.forEach(function (element, index) {
                    if (element['Transformation_Short'] == transformation && year == element[
                            'ReportingYear']) {
                        actoion_type.push([element['ActionTaken']]);
                        total.push(Number(element['Total']));
                    }
                });

                if (actoion_type.length > 1 && total.length > 1) {
                    $(".actiontaken_title").show();
                    $(".actiontaken_title").html("Action Taken");
                    $("#chart-action-taken").fadeIn(1000);
                    actiontaken_chart = c3.generate({
                        bindto: '#chart-action-taken',
                        data: {
                            x: 'ActionTaken',
                            type: 'bar',
                            columns: [actoion_type, total],
                            labels: true,

                        },
                        legend: {
                            show: false
                        },
                        onrendered: function () {
                            d3.selectAll(".c3-axis-y .tick text")
                                .style("display", "none");
                        },
                        types: {
                            data: 'bar'
                        },
                        groups: [
                            actoion_type, total
                        ],
                        color: {
                            pattern: [colorname]
                        },
                        axis: {
                            rotated: true,
                            x: {
                                type: 'category'
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 270,
                            right: 10
                        },

                    });
                } else {
                    $("#chart-action-taken").fadeOut(1000);
                    $(".actiontaken_title").hide();
                }
            });
        }

        function PopulateActionTakenTableDetail(transformation, year, colorname) {

            var target = document.getElementById('table-action-taken');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/actiontaken/get.php', function (crises) {
                spinner.stop();
                var transformation_short = ['Transformation_Short'],
                    actoion_type = ['ActionTaken'],
                    reportingYear = ['ReportingYear'],
                    total = ['Total'];
                crises.forEach(function (element, index) {
                    if (element['Transformation_Short'] == transformation && year == element[
                            'ReportingYear']) {
                        actoion_type.push([element['ActionTaken']]);
                        total.push(Number(element['Total']));
                    }
                });
                //console.log(transformation);
                if (actoion_type.length > 1 && total.length > 1) {
                    $(".actiontaken_title").show();
                    $(".actiontaken_title").html("Action Taken");
                    $("#table-action-taken").fadeIn(1000);

                    var row =
                        "<table class='table table-hover'><tr class='header-row'><th>ACTION TAKEN</th><th style='width: 95px;'>TOTAL</th></tr>";

                    for (i = 1; i < actoion_type.length; i++) {
                        row = row +
                            "<tr class='row-data'><td style='text-align:left;'>" +
                            actoion_type[i] + "</td><td>" + total[i] + "</td></tr>";
                    }
                    row = row + "</table>";
                    document.getElementById("table-action-taken").innerHTML = row;


                } else {
                    $(".actiontaken_title").hide();
                    $("#table-action-taken").fadeOut(1000);
                }
            });
        }



        function ColorGenerator(number, color) {
          //  console.log("color: " + color);
            var colorList = [];
            var index = color.substr(4, 3);
          //  console.log("index: " + index);
            var unindexed = color.substr(7, 14);
            if (index === '81,' || index === '64,') {
                var middle = color.substr(7, 3);

                var last = color.substr(10, 4)
                unindexed = ',' + unindexed;
                for (i = 0; i < number; i++) {
                    colorList[i] = "rgb(" + index + (middle + 25) + last;
                    middle = middle - 15;
                }

            } else {
                for (i = 0; i < number; i++) {
                    colorList[i] = "rgb(" + (index - 15) + unindexed;
                    index = index - 15;
                }
            }

            //console.log(colorList);
            return colorList;
        }

        function PopulateSelectedSubCategory(transformation, year, colorname) {

            var action = ["ActionTaken"];
            news = "https://www.agendaforhumanity.org/viz_endpoint/subcategory/get.php";
            var target = document.getElementById('chart-subcategory');
            var spinner = new Spinner(opts).spin(target);
            d3.json(news, function (error, data) {
                spinner.stop();
                if (error) {
                    // console.error('Error getting or parsing the data.');
                    throw error;
                }
                var subcategory_name = [],
                    total = ['Total'];
                data.forEach(function (element, index) {
                    if (element['ReportingYear'] == year && transformation == element[
                            'Transformation_Short']) {

                        subcategory_name.push([element['SubCategoryName'], Number(element[
                            'Total'])]);

                    }
                });


                if (subcategory_name.length > 1) {
                    $('.subcategory_title').show();
                    $('.subcategory_title').html("Subcategory");
                    ColorGenerator(subcategory_name.length, colorname);
                    $("#chart-subcategory").fadeIn(1000);

                    subcategory_chart = c3.generate({
                        bindto: '#chart-subcategory',
                        data: {

                            columns: subcategory_name,
                            type: 'donut',
                            onclick: function (d, i) {

                                subcat = d.name;
                                $('#selectedd').html(subcat);
                                if (transformation.substr(0, 1) == "1") {
                                    PopulateSearch('1', getTransformationCode(transformation), year,
                                        "#00B1EB");
                                } else if (transformation.substr(0, 1) == "2") {
                                    PopulateSearch('2', getTransformationCode(transformation), year,
                                        "#51AF32");
                                } else if (transformation.substr(0, 1) == "3") {
                                    PopulateSearch('3', getTransformationCode(transformation), year,
                                        "#A863A5");
                                } else if (transformation.substr(0, 1) == "4") {
                                    PopulateSearch('4', getTransformationCode(transformation), year,
                                        "#F7A600");
                                } else if (transformation.substr(0, 1) == "5") {
                                    PopulateSearch('5', getTransformationCode(transformation), year,
                                        "#E84E0F");
                                }


                            },
                        },
                        color: {
                            // 17b8ed
                            pattern: ColorGenerator(subcategory_name.length, colorname)
                        },
                        donut: {
                            label: {
                                format: function (value, ratio, id) {
                                    return d3.format('')(value);
                                }
                            },
                            title: "Subcategory",
                        },
                        tooltip: {
                            format: {
                                value: function (value, ratio, id) {
                                    return (value);
                                }
                            }
                        }



                    });
                    var element = document.getElementById("sub");
                    element.classList.add("col-md-6");
                    element.classList.add("col-sm-12");
                } else {
                    $("#chart-subcategory").fadeOut(1000);
                    $('.subcategory_title').hide();
                    var element = document.getElementById("sub");
                    element.classList.remove("col-md-6");
                    element.classList.remove("col-sm-12");

                }
            })
        }

        function PopulateTransformationMobileTable(year) {
            var target = document.getElementById('mobile-table-transformation');
            var spinner = new Spinner(opts).spin(target);

            //d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (crises) {
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (crises) {
                spinner.stop();
                var transformation_short = ['Transformation_Short'],
                    total = ['Total'],
                    transformation_long = ['Transformation_Long'];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        transformation_short.push(element['Transformation_Short']);
                        total.push(Number(element['Total']));
                        transformation_long.push(element['Transformation_Long']);
                    }
                    // console.log(transformation_short);      
                });
                if (transformation_short.length > 1 && total.length) {
                    $("#mobile-table-transformation").fadeIn(1000);
                    html = '';
                    for (i = 1; i < transformation_long.length; i++) {
                        if (transformation_short[i].substr(0, 1) == "1") {
                            var transformation = transformation_short[i];
                            var title = transformation_long[i];
                            //  console.log(title);
                            // console.log(transformation_long[i]);
                            if (i == 1) {
                                html +=
                                    '<tr><td colspan="2"><h4 style="color:#00B1EB;">Prevent and End Conflict</h4></td></tr>';
                            }
                            html += '<tr id="" style="text-align:left;">' +
                                '<td><a href="javascript:PopulateChartsDetail(`' + transformation + '`,`' +
                                year + '`,`' + title + '`);" >' + transformation_long[i] +
                                '</a> (' + total[i] + ')</td>' +
                                '</tr>';


                            // console.log(html);

                        }

                        if (transformation_long[i].substr(0, 1) == "2") {
                            var transformation = transformation_short[i];
                            if (i == 5) {
                                html +=
                                    '<tr><td colspan="2"><h4 style="color:#51AF32;">Respect Rules of War</h4></td></tr>';
                            }
                            html += '<tr id="" style="text-align:left;">' +
                                '<td><a href="javascript:PopulateChartsDetail(`' + transformation + '`,`' +
                                year + '`,`' + transformation_long[i] + '`);" >' + transformation_long[i] +
                                '</a> (' + total[i] + ')</td>' +
                                '</tr>';
                            $('#detail.modal-title').html(
                                "<span style='color: #51AF32; text-align:left;'>" + transformation_long[i] +
                                "</span>");
                        }
                        if (transformation_long[i].substr(0, 1) == "3") {
                            var transformation = transformation_short[i];
                            if (i == 10) {
                                html +=
                                    '<tr><td colspan="2"><h4 style="color:#A863A5;">Leave no one behind</h4></td></tr>';
                            }
                            html += '<tr id="" style="text-align:left;">' +
                                '<td><a href="javascript:PopulateChartsDetail(`' + transformation + '`,`' +
                                year + '`,`' + transformation_long[i] + '`);" >' + transformation_long[i] +
                                '</a> (' + total[i] + ')</td>' +
                                '</tr>';
                            $('#detail.modal-title').html(
                                "<span style='color: #A863A5; text-align:left;'>" + transformation_long[i] +
                                "</span>");
                        }
                        if (transformation_long[i].substr(0, 1) == "4") {
                            var transformation = transformation_short[i];
                            if (i == 17) {
                                html +=
                                    '<tr><td colspan="2"><h4 style="color:#F7A600;">Work differently to end need</h4></td></tr>';
                            }
                            html += '<tr id="" style="text-align:left;">' +
                                '<td><a href="javascript:PopulateChartsDetail(`' + transformation + '`,`' +
                                year + '`,`' + transformation_long[i] + '`);" >' + transformation_long[i] +
                                '</a> (' + total[i] + ')</td>' +
                                '</tr>';
                            $('#detail.modal-title').html(
                                "<span style='color: #F7A600; text-align:left;'>" + transformation_long[i] +
                                "</span>");
                        }
                        if (transformation_long[i].substr(0, 1) == "5") {
                            var transformation = transformation_short[i];
                            if (i == 20) {
                                html +=
                                    '<tr><td colspan="2"><h4 style="color:#E84E0F;">Invest in Humanity</h4></td></tr>';
                            }
                            html += '<tr id="" style="text-align:left;">' +
                                '<td><a href="javascript:PopulateChartsDetail(`' + transformation + '`,`' +
                                year + '`,`' + transformation_long[i] + '`);" >' + transformation_long[i] +
                                '</a> (' + total[i] + ')</td>' +
                                '</tr>';
                            $('#detail.modal-title').html(
                                "<span style='color: #51AF32; text-align:left;'>" + transformation_long[i] +
                                "</span>");
                        }

                    }

                    document.getElementById("mobile-table-transformation").innerHTML = html;
                } else {
                    $("#mobile-table-transformation").fadeOut(1000);
                }
            });

        }

        function PopulateTransformationTable(year) {
            var target = document.getElementById('table-transformation');
            var spinner = new Spinner(opts).spin(target);

            // d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (crises) {
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (crises) {
                spinner.stop();
                var transformation_short = ['Transformation_Short'],
                    total = ['Total'],
                    transformation_long = ['Transformation_Long'];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        transformation_short.push(element['Transformation_Short']);
                        total.push(Number(element['Total']));
                        transformation_long.push(element['Transformation_Long']);
                    }
                    // console.log(transformation_short);      
                });
                if (transformation_short.length > 1 && total.length) {
                    $("#table-transformation").fadeIn(1000);
                    html = '';
                    for (i = 1; i < transformation_long.length; i++) {
                        if (transformation_long[i].substr(0, 1) == "1") {
                            var transformation = transformation_short[i];
                            if (i == 1) {
                                html +=
                                    '<tr><td colspan="2"><h4 style="color:#00B1EB;">Prevent and End Conflict</h4></td></tr>';
                            }
                            html += '<tr id="" class="country-row">' +
                                '<td><a href="javascript:PopulateChartsDetail(`' + transformation + '`,`' +
                                year + '`,`' + transformation_long[i] + '`);" >' + transformation_long[i] +
                                ' &nbsp;&nbsp;<i class="fas fa-bars"></i></a></td>' +
                                '<td class="percentagebar">' +
                                '<div class="outerbar">' +
                                '<div class="innerbar" style="background:#00B1EB;width:' + (total[i] * 15) +
                                '%;"><strong>' + total[i] +
                                '</strong></div>' +
                                '</div>' +
                                '</td></tr>';
                            $('#detail.modal-title').html(
                                "<span style='color: #00B1EB; text-align:left;'>" + transformation_long[i] +
                                "</span>");
                        }

                        if (transformation_long[i].substr(0, 1) == "2") {
                            var transformation = transformation_short[i];
                            if (i == 5) {
                                html +=
                                    '<tr><td colspan="2"><h4 style="color:#51AF32;">Respect Rules of War</h4></td></tr>';
                            }
                            html += '<tr id="" class="country-row">' +
                                '<td><a href="javascript:PopulateChartsDetail(`' + transformation + '`,`' +
                                year + '`,`' + transformation_long[i] + '`);" >' + transformation_long[i] +
                                ' &nbsp;&nbsp;<i class="fas fa-bars"></i></a></td>' +
                                '<td class="percentagebar">' +
                                '<div class="outerbar">' +
                                '<div class="innerbar" style="background:#51AF32;width:' + (total[i] * 8) +
                                '%;"><strong>' + total[i] +
                                '</strong></div>' +
                                '</div>' +
                                '</td></tr>';
                            $('#detail.modal-title').html(
                                "<span style='color: #51AF32; text-align:left;'>" + transformation_long[i] +
                                "</span>");
                        }
                        if (transformation_long[i].substr(0, 1) == "3") {
                            var transformation = transformation_short[i];
                            if (i == 10) {
                                html +=
                                    '<tr><td colspan="2"><h4 style="color:#A863A5;">Leave no one behind</h4></td></tr>';
                            }
                            html += '<tr id="" class="country-row">' +
                                '<td><a href="javascript:PopulateChartsDetail(`' + transformation + '`,`' +
                                year + '`,`' + transformation_long[i] + '`);" >' + transformation_long[i] +
                                ' &nbsp;&nbsp;<i class="fas fa-bars"></i></a></td>' +
                                '<td class="percentagebar">' +
                                '<div class="outerbar">' +
                                '<div class="innerbar" style="background:#A863A5;width:' + (total[i] * 8) +
                                '%;"><strong>' + total[i] +
                                '</strong></div>' +
                                '</div>' +
                                '</td></tr>';
                            $('#detail.modal-title').html(
                                "<span style='color: #A863A5; text-align:left;'>" + transformation_long[i] +
                                "</span>");
                        }
                        if (transformation_long[i].substr(0, 1) == "4") {
                            var transformation = transformation_short[i];
                            if (i == 17) {
                                html +=
                                    '<tr><td colspan="2"><h4 style="color:#F7A600;">Work differently to end need</h4></td></tr>';
                            }
                            html += '<tr id="" class="country-row">' +
                                '<td><a href="javascript:PopulateChartsDetail(`' + transformation + '`,`' +
                                year + '`,`' + transformation_long[i] + '`);" >' + transformation_long[i] +
                                ' &nbsp;&nbsp;<i class="fas fa-bars"></i></a></td>' +
                                '<td class="percentagebar">' +
                                '<div class="outerbar">' +
                                '<div class="innerbar" style="background:#F7A600;width:' + (total[i] * 8) +
                                '%;"><strong>' + total[i] +
                                '</strong></div>' +
                                '</div>' +
                                '</td></tr>';
                            $('#detail.modal-title').html(
                                "<span style='color: #F7A600; text-align:left;'>" + transformation_long[i] +
                                "</span>");
                        }
                        if (transformation_long[i].substr(0, 1) == "5") {
                            var transformation = transformation_short[i];
                            if (i == 20) {
                                html +=
                                    '<tr><td colspan="2"><h4 style="color:#E84E0F;">Invest in Humanity</h4></td></tr>';
                            }
                            html += '<tr id="" class="country-row">' +
                                '<td><a href="javascript:PopulateChartsDetail(`' + transformation + '`,`' +
                                year + '`,`' + transformation_long[i] + '`);" >' + transformation_long[i] +
                                ' &nbsp;&nbsp;<i class="fas fa-bars"></i></a></td>' +
                                '<td class="percentagebar">' +
                                '<div class="outerbar">' +
                                '<div class="innerbar" style="background:#E84E0F; width:' + (total[i] * 8) +
                                '%;"><strong>' + total[i] +
                                '</strong></div>' +
                                '</div>' +
                                '</td></tr>';
                            $('#detail.modal-title').html(
                                "<span style='color: #51AF32; text-align:left;'>" + transformation_long[i] +
                                "</span>");
                        }
                    }
                    document.getElementById("table-transformation").innerHTML = html;
                } else {
                    $("#table-transformation").fadeOut(1000);
                }
            });

        }

        function getTransformationCode(transformation) {
            if (transformation == '1A')
                return 46;
            else if (transformation == '1B')
                return 27;
            else if (transformation == '1C')
                return 38;
            else if (transformation == '1D')
                return 80;
            else if (transformation == '2A')
                return 47;
            else if (transformation == '2B')
                return 32;
            else if (transformation == '2C')
                return 48;
            else if (transformation == '2D')
                return 29;
            else if (transformation == '2E')
                return 49;
            else if (transformation == '3A')
                return 51;
            else if (transformation == '3B')
                return 52;
            else if (transformation == '3C')
                return 53;
            else if (transformation == '3D')
                return 54;
            else if (transformation == '3E')
                return 55;
            else if (transformation == '3F')
                return 56;
            else if (transformation == '3G')
                return 57;
            else if (transformation == '4A')
                return 59;
            else if (transformation == '4B')
                return 35;
            else if (transformation == '4C')
                return 61;
            else if (transformation == '5A')
                return 74;
            else if (transformation == '5B')
                return 68;
            else if (transformation == '5C')
                return 86;
            else if (transformation == '5D')
                return 83;
            else if (transformation == '5E')
                return 69;




        }

        function PopulateChartsDetail(transformation, reportingYear, title) {
            $("#selectedd").empty();
            $('#detailVisualization').modal('toggle');

            if (transformation.charAt(0) == "1") {
                $(".popup_title").css("color", "#40C5F0");
                $(".lr").css("background-color", "#40C5F0");
                $(".rl").css("background-color", "#40C5F0");
                $('#detail.modal-title').html(
                    "<span style='color: #40C5F0; text-align:left;'>" + title +
                    "</span>");
                PopulateChallengeDetail(transformation, reportingYear, "#40C5F0");
                PopulateActionTakenDetail(transformation, reportingYear, "#40C5F0");
                PopulateActionTakenTableDetail(transformation, reportingYear, "#40C5F0");
                PopulateCrossCuttingIssuesDetail(transformation, reportingYear, "#40C5F0");
                PopulateCrossCuttingIssuesTableDetail(transformation, reportingYear, "#40C5F0");
                PopulateSelectedSubCategory(transformation, reportingYear, "rgb(64,197,240)");
                PopulateSearch('1', getTransformationCode(transformation), reportingYear, "#40C5F0");

            } else if (transformation.charAt(0) == "2") {
                $(".popup_title").css("color", "#51AF32");
                $(".lr").css("background-color", "#51AF32");
                $(".rl").css("background-color", "#51AF32");
                $('#detail.modal-title').html(
                    "<span style='color: #51AF32; text-align:left;'>" + title +
                    "</span>");

                PopulateChallengeDetail(transformation, reportingYear, "#51AF32");
                PopulateActionTakenDetail(transformation, reportingYear, "#51AF32");
                PopulateActionTakenTableDetail(transformation, reportingYear, "#51AF32");
                PopulateCrossCuttingIssuesTableDetail(transformation, reportingYear, "#51AF32");
                PopulateCrossCuttingIssuesDetail(transformation, reportingYear, "#51AF32");
                PopulateSelectedSubCategory(transformation, reportingYear, "rgb(81,175,50)");
                PopulateSearch('2', getTransformationCode(transformation), reportingYear, "#51AF32");

            } else if (transformation.charAt(0) == "3") {
                $(".popup_title").css("color", "#A863A5");
                $(".lr").css("background-color", "#A863A5");
                $(".rl").css("background-color", "#A863A5");
                $('#detail.modal-title').html(
                    "<span style='color: #A863A5; text-align:left;'>" + title +
                    "</span>");

                PopulateCrossCuttingIssuesTableDetail(transformation, reportingYear, "#A863A5");
                PopulateChallengeDetail(transformation, reportingYear, "#A863A5");
                PopulateActionTakenDetail(transformation, reportingYear, "#A863A5");
                PopulateActionTakenTableDetail(transformation, reportingYear, "#A863A5");
                PopulateCrossCuttingIssuesDetail(transformation, reportingYear, "#A863A5");
                PopulateCrossCuttingIssuesTableDetail(transformation, reportingYear, "#A863A5");
                PopulateSelectedSubCategory(transformation, reportingYear, "rgb(168,99,165)");
                PopulateSearch('3', getTransformationCode(transformation), reportingYear, "#A863A5");

            } else if (transformation.charAt(0) == "4") {
                $(".popup_title").css("color", "#F7A600");
                $(".lr").css("background-color", "#F7A600");
                $(".rl").css("background-color", "#F7A600");
                $('#detail.modal-title').html(
                    "<span style='color: #F7A600; text-align:left;'>" + title +
                    "</span>");

                PopulateChallengeDetail(transformation, reportingYear, "#F7A600");
                PopulateActionTakenDetail(transformation, reportingYear, "#F7A600");
                PopulateActionTakenTableDetail(transformation, reportingYear, "#F7A600");
                PopulateCrossCuttingIssuesDetail(transformation, reportingYear, "#F7A600");
                PopulateCrossCuttingIssuesTableDetail(transformation, reportingYear, "#F7A600");
                PopulateSelectedSubCategory(transformation, reportingYear, "rgb(247,166,0)");
                PopulateSearch('4', getTransformationCode(transformation), reportingYear, "#F7A600");

            } else if (transformation.charAt(0) == "5") {
                $(".popup_title").css("color", "#E84E0F");
                $(".lr").css("background-color", "#E84E0F");
                $(".rl").css("background-color", "#E84E0F");
                $('#detail.modal-title').html(
                    "<span style='color: #F7A600; text-align:left;'>" + title +
                    "</span>");


                PopulateChallengeDetail(transformation, reportingYear, "#E84E0F");
                PopulateActionTakenDetail(transformation, reportingYear, "#E84E0F");
                PopulateActionTakenTableDetail(transformation, reportingYear, "#E84E0F");
                PopulateCrossCuttingIssuesDetail(transformation, reportingYear, "#E84E0F");
                PopulateCrossCuttingIssuesTableDetail(transformation, reportingYear, "#E84E0F");
                PopulateSelectedSubCategory(transformation, reportingYear, "rgb(232,78,15)");
                PopulateSearch('5', getTransformationCode(transformation), reportingYear, "#E84E0F");

            }

        }



        function PopulateStackholderTotal(year) {

            var target = document.getElementById('total-stackholder');
            var spinner = new Spinner(opts).spin(target);

            var target1 = document.getElementById('total-stackholder_detail');
            var spinner1 = new Spinner(opts).spin(target1);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/total.php', function (crises) {
                spinner.stop();
                spinner1.stop();
                var total = ['Total'],
                    reportingYear = ['ReportingYear'];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        total.push(Number(element['Total']));
                    }
                });


                if (total.length > 0 && total[1] != undefined) {
                    $("#total-stackholder").fadeIn(1000);
                    $("#total-stackholder_detail").fadeIn(1000);
                    $('#total-stackholder').html(
                        "<h1 class='text mb-4' style='font-size: 90px; color: #F7A600; padding-top:10px;'>" +
                        total[1] + "</h2>");
                    $('#total-stackholder_detail').html(
                        "<h1 class='text mb-4' style='font-size: 90px; color: #F7A600; padding-top:10px;'>" +
                        total[1] + "</h2>");



                } else {

                    $('#total-stackholder').fadeOut(1000);
                    $('#total-stackholder_detail').fadeOut(1000);
                }
            });
        }



        function PopulateCrossCuttingIssues(year) {
            var target = document.getElementById('crosscutting');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/crosscutting-issues/get.php', function (error,
                data) {
                spinner.stop();
                if (error) {
                    throw error;
                }
                var cci = ['CCI'],
                    reportingYear = ['ReportingYear'],
                    total = ['Total'];
                var myAssociativeArr = [];

                data.forEach(function (element, index) {
                    var obj = {
                        CCI: '',
                        Total: ''
                    };
                    if (element['ReportingYear'] == year) {
                        obj.CCI = element['CCI'];
                        obj.Total = element['Total'];
                        myAssociativeArr.push(obj);
                    }
                });


                PopulateWordCloud(myAssociativeArr);
                PopulateWordCloudTable(myAssociativeArr);

            });
        }


        function PopulateStokeHolderTable(year) {


            var target = document.getElementById('table-stakeholder-org');
            var spinner = new Spinner(opts).spin(target);

            // console.log(year);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/organization.php', function (crises) {
                spinner.stop();
                var stakeHolders = ['Stakeholder'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        // console.log(element['ReportingYear']);
                        stakeHolders.push(element['Stakeholder']);
                        total.push(Number(element['Total']));
                        reportingYear.push(element['ReportingYear']);
                    }

                });
                //console.log(reportingYear);

                //console.log(stakeHolders.length && total.length);
                if (stakeHolders.length > 1 && total.length) {


                    var row =
                        "<table id='byregion' class='table table-hover sortable'><thead><tr class='header-row' style='cursor:pointer'><th>STAKEHOLDER</th><th>TOTAL</th></tr></thead><tbody>";

                    for (i = 1; i < stakeHolders.length; i++) {
                        row = row +
                            "<tr class='row-data'><td style='text-align:left;'>" +
                            stakeHolders[i] + "</td><td>" + total[i] + "</td></tr>";
                    }
                    row = row + "<tbody></table>";
                    document.getElementById("table-stakeholder-org").innerHTML = row;

                } else {
                    $("#table-stakeholder-org").fadeOut(1000);
                }





            });
        }

        function PopulateCrossCuttingIssueTable(year) {


            var target = document.getElementById('table-cci');
            var spinner = new Spinner(opts).spin(target);


            var target = document.getElementById('table-cci');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/crosscutting-issues/get.php', function (error,
                data) {
                spinner.stop();
                if (error) {
                    throw error;
                }
                var cci = ['CCI'],
                    reportingYear = ['ReportingYear'],
                    total = ['Total'];
                var myAssociativeArr = [];

                data.forEach(function (element, index) {
                    var obj = {
                        CCI: '',
                        Total: ''
                    };
                    if (element['ReportingYear'] == year) {
                        obj.CCI = element['CCI'];
                        obj.Total = element['Total'];
                        myAssociativeArr.push(obj);
                    }
                });


                if (myAssociativeArr.length > 1) {

                    var row =
                        "<table class='table table-hover'><tr class='header-row'><th>Cross Cutting Issues</th><th style='width: 95px;'>Total</th></tr>";

                    for (i = 1; i < myAssociativeArr.length; i++) {
                        row = row +
                            "<tr class='row-data'><td style='text-align:left;'>" +
                            myAssociativeArr[i].CCI + "</td><td>" + myAssociativeArr[i].Total + "</td></tr>";
                    }
                    row = row + "</table>";
                    document.getElementById("table-cci").innerHTML = row;

                } else {
                    $("#table-cci").fadeOut(1000);
                }

            });
        }

        function PopulateCrossCuttingIssuesTableDetail(transformation, year, colorname) {

            //  console.log(year);

            var target = document.getElementById('table-cci-detail');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/crosscutting-issues/detail.php', function (error,
                data) {
                spinner.stop();
                if (error) {
                    throw error;
                }
                var transformations = ['Transformation_Short'],
                    cciShort = ['CCI'],
                    reportingYear = ['ReportingYear'],
                    total = ['Total'];


                var myAssociativeArr = [];

                data.forEach(function (element, index) {
                    var obj = {
                        CCI: '',
                        Total: ''
                    };
                    if (element['Transformation_Short'] === transformation && element[
                            'ReportingYear'] === year) {

                        obj.CCI = element['CCI'];
                        obj.Total = element['Total'];
                        myAssociativeArr.push(obj);

                    }

                });



                if (myAssociativeArr.length > 1) {
                    $(".cci_title").html("Cross Cutting Issues");
                    var row =
                        "<table class='table table-hover'><tr class='header-row'><th>Cross Cutting Issues</th><th>Total</th></tr>";

                    for (i = 1; i < myAssociativeArr.length; i++) {
                        row = row +
                            "<tr class='row-data'><td style='text-align:left;'>" +
                            myAssociativeArr[i].CCI + "</td><td>" + myAssociativeArr[i].Total + "</td></tr>";
                    }
                    row = row + "</table>";
                    document.getElementById("table-cci-detail").innerHTML = row;

                } else {
                    $("#table-cci-detail").fadeOut(1000);
                    $(".cci_title").hide();
                }
            });
        }

        function PopulateStokeHolderRegionTable(year) {
            var target = document.getElementById('table-stakeholder-region');
            var spinner = new Spinner(opts).spin(target);
            // console.log(year);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/region.php', function (crises) {
                spinner.stop();
                var stakeHolders = ['StakeHolders'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        // console.log(element['ReportingYear']);
                        stakeHolders.push(element['Stakeholder']);
                        total.push(Number(element['Total']));
                        reportingYear.push(element['ReportingYear']);
                    }

                });
                //console.log(reportingYear);
                //console.log(stakeHolders.length && total.length);
                if (stakeHolders.length > 1 && total.length) {


                    var row =
                        "<table id='byorg' class='table table-hover sortable'><thead><tr class='header-row'  style='cursor:pointer'><th>STAKEHOLDER</th><th>TOTAL</th></tr></thead><tbody>";

                    for (i = 1; i < stakeHolders.length; i++) {
                        row = row +
                            "<tr class='row-data'><td style='text-align:left;'>" +
                            stakeHolders[i] + "</td><td>" + total[i] + "</td></tr>";
                    }
                    row = row + "<tbody></table>";
                    document.getElementById("table-stakeholder-region").innerHTML = row;

                } else {
                    $("#table-stakeholder-region").fadeOut(1000);
                }

            });
        }


        function PopulateChallenge(year) {
            var target = document.getElementById('chart_challenges');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/challenges/get.php', function (crises) {
                spinner.stop();
                var challengeID = ['ChallengeID'],
                    challengesShortCode = ['ChallengesShortCode'],
                    reportingYear = ['ReportingYear'],
                    total = ['Total'];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        challengeID.push([element['ChallengeID']]);
                        challengesShortCode.push([element['ChallengesShortCode']]);
                        total.push(Number(element['Total']));
                    }
                });
                if (challengeID.length > 1 && total.length > 1) {
                    $("#chart_challenges").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart_challenges',
                        data: {
                            x: 'ChallengesShortCode',
                            type: 'bar',
                            columns: [challengesShortCode, total],
                            labels: true,
                            labels: {
                                format: function (v, id, i, j) {

                                    return truncate(v);
                                    // return v.substring(0,5)+"...";
                                }
                            }
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },
                        groups: [
                            challengesShortCode, total
                        ],
                        color: {
                            pattern: ["#002840"]
                        },
                        axis: {

                            x: {
                                type: 'category',
                                tick: {
                                    rotate: 75,
                                    multiline: true
                                }
                            },
                        },
                        size: {
                            height: 410
                        },
                        padding: {
                            left: 10,
                            right: 10
                        },

                    });
                } else {
                    $("#chart_challenges").fadeOut(1000);
                }
            });
        }

        function truncate(input) {
            if (input.length > 5)
                return input.substring(0, 5) + '...';
            else
                return input;
        };

        function PopulateCrossCuttingIssuesDetail(transformation, year, colorname) {
            // console.log(transformation);
            //  console.log(year);
            var target = document.getElementById('crosscutting-detail');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/crosscutting-issues/detail.php', function (error,
                data) {
                spinner.stop();
                if (error) {
                    throw error;
                }
                var transformations = ['Transformation_Short'],
                    cciShort = ['CCI'],
                    reportingYear = ['ReportingYear'],
                    total = ['Total'];


                var myAssociativeArr = [];

                data.forEach(function (element, index) {
                    var obj = {
                        CCI: '',
                        Total: ''
                    };
                    if (element['Transformation_Short'] === transformation && element[
                            'ReportingYear'] === year) {

                        obj.CCI = element['CCI'];
                        obj.Total = element['Total'];
                        myAssociativeArr.push(obj);

                    }

                });
                // console.log(myAssociativeArr);

                PopulateWordCloudDetail(myAssociativeArr);
            });
        }




        function PopulateHeader(year) {

            var y = 1;
            $('.main_header').html((+year + y) + " Interactive Summary").fadeIn(1000);
            $('.tab_header').html((+year + y) + " Visualization").fadeIn(1000);
            $('.year').html((+year + y)).fadeIn(1000);
            $('.stakeholder-header').html("Stakeholders <br>that reported <br>in " + (+year + y)).fadeIn(1000);
            $('.transformation_header').html((+year + 1) + " Reports by <br>Agenda for <br>Humanity Transformation")
                .fadeIn(1000);
            $('.crosscuttiong_header').html("Cross cutting Issues").fadeIn(1000);
            $('#challenges_header').html("Challenges").fadeIn(1000);
            $('.byregion_header').html("By Region of operation").fadeIn(1000);
            $('.byorganisation_header').html("By Type of Organisation").fadeIn(1000);
        }
    </script>

    <script>
        function PopulateMainChart(data) {

            // set the dimensions and margins of the graph
            d3.select("#chart-transformation").html("");
            var margin = {
                    top: 30,
                    right: 10,
                    bottom: 30,
                    left: 10
                },
                width = 1000 - margin.left - margin.right,
                height = 820 - margin.top - margin.bottom,
                innerRadius = 70,
                outerRadius = Math.min(width, height) /
                2; // the outerRadius goes from the middle of the SVG area to the border
            // append the svg object
            var div = d3.select("#chart-transformation").append("div")
                .attr("class", "tooltip")
                .style("opacity", 0);
            var svg = d3.select("#chart-transformation")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", "translate(" + (width / 2 + margin.left) + "," + (height / 2 + margin.top) + ")");
            // Scales
            var x = d3.scaleBand()
                .range([0, 2 * Math
                    .PI
                ]) // X axis goes from 0 to 2pi = all around the circle. If I stop at 1Pi, it will be around a half circle
                .align(0) // This does nothing
                .domain(data.map(function (d) {
                    return d.Transformation_Short;
                })); // The domain of the X axis is the list of states.
            var y;
            if (data[0].ReportingYear === '2018') {
                y = d3.scaleRadial()
                    .range([innerRadius, outerRadius]) // Domain will be define later.
                    .domain([0, 70]); // Domain of Y is from 0 to the max seen in the data
            } else {
                y = d3.scaleRadial()
                    .range([innerRadius, outerRadius]) // Domain will be define later.
                    .domain([0, 90]); // Domain of Y is from 0 to the max seen in the data
            }

            // Add the bars
            svg.append("g")
                .selectAll("path")
                .data(data)
                .enter()
                .append("path")
                .attr("fill", function (d) {
                    if (d.Transformation_Short.charAt(0) == "1") return "#40C5F0"
                    else if (d.Transformation_Short.charAt(0) == "2") return "#51AF32"
                    else if (d.Transformation_Short.charAt(0) == "3") return "#A863A5"
                    else if (d.Transformation_Short.charAt(0) == "4") return "#F7A600"
                    else if (d.Transformation_Short.charAt(0) == "5") return "#E84E0F"
                })
                .attr("d", d3.arc() // imagine your doing a part of a donut plot
                    .innerRadius(innerRadius)
                    .outerRadius(function (d) {
                        return y(d.Total);
                    })
                    .startAngle(function (d) {
                        return x(d.Transformation_Short);
                    })
                    .endAngle(function (d) {
                        return x(d.Transformation_Short) + x.bandwidth();
                    })
                    .padAngle(0.04)
                    .padRadius(innerRadius))
                .on("mouseover", function (d) {
                    div.transition()
                        .duration(200)
                        .style("opacity", .9);
                    div.html(d.Transformation_Long + " <br><h3 style='color: #fff;'>" + d.Total + "</h3>")
                        .style("left", (d3.event.pageX - 410) + "px")
                        .style("display", "inline")
                        .style("top", (d3.event.pageY - 966) + "px");

                    d3.select(this)
                        .style("opacity", "0.5");
                })
                .on("mouseout", function (d) {
                    div.transition()
                        .duration(500)
                        .style("opacity", 0);
                    d3.select(this)
                        .style("opacity", "1");
                })

                .on("click", function (d) {
                    $("#selectedd").empty();
                    $('#detailVisualization').modal('toggle');

                    if (d.Transformation_Short.charAt(0) == "1") {
                        $(".popup_title").css("color", "#40C5F0");
                        $(".lr").css("background-color", "#40C5F0");
                        $(".rl").css("background-color", "#40C5F0");

                        //  PopulateChartsDetail(transformation, reportingYear)

                        //     PopulateChartsDetail(d.Transformation_Short, d.ReportingYear);
                        //      PopulateChartsDetail(d.Transformation_Short, d.ReportingYear);
                        //      PopulateChartsDetail(d.Transformation_Short, d.ReportingYear);
                        PopulateChartsDetail(d.Transformation_Short, d.ReportingYear, d.Transformation_Short);
                        return $('#detail.modal-title').html(
                            "<span style='color: #40C5F0; text-align:left;'>" + d.Transformation_Long +
                            "</span>")
                    } else if (d.Transformation_Short.charAt(0) == "2") {
                        $(".popup_title").css("color", "#51AF32");
                        $(".lr").css("background-color", "#51AF32");
                        $(".rl").css("background-color", "#51AF32");


                        PopulateChartsDetail(d.Transformation_Short, d.ReportingYear, d.Transformation_Short);
                        return $('#detail.modal-title').html(
                            "<span style='color: #51AF32; text-align:left;'>" + d.Transformation_Long +
                            "</span>")
                    } else if (d.Transformation_Short.charAt(0) == "3") {
                        $(".popup_title").css("color", "#A863A5");
                        $(".lr").css("background-color", "#A863A5");
                        $(".rl").css("background-color", "#A863A5");


                        PopulateChartsDetail(d.Transformation_Short, d.ReportingYear, d.Transformation_Short);
                        return $('#detail.modal-title').html(
                            "<span style='color: #A863A5; text-align:left;'>" + d.Transformation_Long +
                            "</span>")
                    } else if (d.Transformation_Short.charAt(0) == "4") {
                        $(".popup_title").css("color", "#F7A600");
                        $(".lr").css("background-color", "#F7A600");
                        $(".rl").css("background-color", "#F7A600");


                        PopulateChartsDetail(d.Transformation_Short, d.ReportingYear, d.Transformation_Short);
                        return $('#detail.modal-title').html(
                            "<span style='color: #F7A600; text-align:left;'>" + d.Transformation_Long +
                            "</span>")
                    } else if (d.Transformation_Short.charAt(0) == "5") {
                        $(".popup_title").css("color", "#E84E0F");
                        $(".lr").css("background-color", "#E84E0F");
                        $(".rl").css("background-color", "#E84E0F");


                        PopulateChartsDetail(d.Transformation_Short, d.ReportingYear, d.Transformation_Short);
                        return $('#detail.modal-title').html(
                            "<span style='color: #E84E0F; text-align:left;'>" + d.Transformation_Long +
                            "</span>")
                    }

                    $('.modal-title').text("<span style='color: #40C5F0'>" + d.Transformation_Long + "</span>")

                })


            // Add the labels
            svg.append("g")
                .selectAll("g")
                .data(data)
                .enter()
                .append("g")
                .attr("text-anchor", function (d) {
                    return (x(d.Transformation_Short) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) < Math.PI ?
                        "end" : "start";
                })
                .attr("transform", function (d) {
                    return "rotate(" + ((x(d.Transformation_Short) + x.bandwidth() / 2) * 180 / Math.PI - 90) +
                        ")" +
                        "translate(" + (80) + ",0)";
                })
                .append("text")
                .text(function (d) {
                    return (d.Transformation_Short)
                })

                .attr("transform", function (d) {
                    return (x(d.Transformation_Short) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) < Math.PI ?
                        "rotate(180)" : "rotate(0)";
                })
                .style("font-size", "11px")
                .attr("alignment-baseline", "middle")
            svg.append("g")
                .selectAll("g")
                .data(data)
                .enter()
                .append("g")
                .attr("text-anchor", function (d) {
                    return (x(d.Transformation_Short) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) < Math.PI ?
                        "end" : "start";
                })
                .attr("transform", function (d) {
                    return "rotate(" + ((x(d.Transformation_Short) + x.bandwidth() / 2) * 180 / Math.PI - 90) +
                        ")" +
                        "translate(" + (y(d.Total) + 5) + ",0)";

                })
                .append("text")
                .text(function (d) {
                    return (d.Total)
                })

                .attr("transform", function (d) {
                    return (x(d.Transformation_Short) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) < Math.PI ?
                        "rotate(180)" : "rotate(0)";
                })
                .style("font-size", "14px")
                .attr("alignment-baseline", "middle")
        }
    </script>

    <script>
        /*Dropdown Menu*/
        $('.dropdown').click(function () {
            $(this).attr('tabindex', 1).focus();
            $(this).toggleClass('active');
            $(this).find('.dropdown-menu').slideToggle(300);
        });
        $('.dropdown').focusout(function () {
            $(this).removeClass('active');
            $(this).find('.dropdown-menu').slideUp(300);
        });
        $('.dropdown .dropdown-menu li').click(function () {
            $(this).parents('.dropdown').find('span').text($(this).text());
            $(this).parents('.dropdown').find('input').attr('value', $(this).attr('id'));
        });
        /*End Dropdown Menu*/

        $('.dropdown-menu li').click(function () {
            var input = $(this).parents('.dropdown').find('input').val(),
                msg = '<span class="msg">Hidden input value: ';
            $('.msg').html(msg + input + '</span>');

            PopulateStokeHolder(input);
            PopulateStokeHolderRegion(input);
            PopulateTransformation(input);
            PopulateTransformationTable(input);
            PopulateTransformationMobileTable(input);

            PopulateStackholderTotal(input);
            PopulateHeader(input);
            PopulateCrossCuttingIssues(input);
            PopulateCrossCuttingIssueTable(input);
            PopulateChallenge(input);
            PopulateStokeHolderTable(input);
            PopulateStokeHolderRegionTable(input);

        });
    </script>

    <script>
        function transformationSelected(transformation) {
            $('#transformation h5').html(transformation);
        }
    </script>


    <script>
        function PopulateWordCloud(data) {

            d3.select("#crosscutting").html("");
            // List of words
            // set the dimensions and margins of the graph
            var margin = {
                    top: 10,
                    right: 10,
                    bottom: 10,
                    left: 10
                },
                width = 1200 - margin.left - margin.right,
                height = 450 - margin.top - margin.bottom;
            // append the svg object to the body of the page
            var svg = d3.select("#crosscutting").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")");
            // Constructs a new cloud layout instance. It run an algorythm to find the position of words that suits your requirements
            // Wordcloud features that are different from one word to the other must be here
            var layout = d3.layout.cloud()
                .size([width, height])
                .words(data.map(function (d) {
                    return {
                        text: d.CCI,
                        size: d.Total

                    };
                }))
                .padding(5) //space between words
                .rotate(function () {
                    return ~~(Math.random() * 2) * 90;
                })
                .fontSize(function (d) {
                    return d.size;
                }) // font size of words
                .on("end", draw);
            layout.start();
            // This function takes the output of 'layout' above and draw the words
            // Wordcloud features that are THE SAME from one word to the other can be here
            function draw(words) {
                svg
                    .append("g")
                    .attr("transform", "translate(" + layout.size()[0] / 2 + "," + layout.size()[1] / 2 + ")")
                    .selectAll("text")
                    .data(words)
                    .enter().append("text")
                    .style("font-size", function (d) {
                        return d.size;
                    })
                    .style("fill", randomColor)
                    .attr("text-anchor", "middle")
                    .style("font-family", "Impact")
                    .attr("transform", function (d) {
                        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                    })
                    .text(function (d) {
                        return d.text;
                    });
            }
        }

        function PopulateWordCloudTable(data) {

            d3.select("#crosscutting_table").html("");
            // List of words
            // set the dimensions and margins of the graph
            var margin = {
                    top: 10,
                    right: 10,
                    bottom: 10,
                    left: 10
                },
                width = 1200 - margin.left - margin.right,
                height = 450 - margin.top - margin.bottom;
            // append the svg object to the body of the page
            var svg = d3.select("#crosscutting_table").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")");
            // Constructs a new cloud layout instance. It run an algorythm to find the position of words that suits your requirements
            // Wordcloud features that are different from one word to the other must be here
            var layout = d3.layout.cloud()
                .size([width, height])
                .words(data.map(function (d) {
                    return {
                        text: d.CCI,
                        size: d.Total

                    };
                }))
                .padding(5) //space between words
                .rotate(function () {
                    return ~~(Math.random() * 2) * 90;
                })
                .fontSize(function (d) {
                    return d.size;
                }) // font size of words
                .on("end", draw);
            layout.start();
            // This function takes the output of 'layout' above and draw the words
            // Wordcloud features that are THE SAME from one word to the other can be here
            function draw(words) {

                svg
                    .append("g")
                    .attr("transform", "translate(" + layout.size()[0] / 2 + "," + layout.size()[1] / 2 + ")")
                    .selectAll("text")
                    .data(words)
                    .enter().append("text")
                    .style("font-size", function (d) {
                        return d.size;
                    })
                    .style("fill", randomColor)
                    .attr("text-anchor", "middle")
                    .style("font-family", "Impact")
                    .attr("transform", function (d) {
                        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                    })
                    .text(function (d) {
                        return d.text;
                    });
            }
        }

        function PopulateWordCloudDetail(data) {


            //console.log(data);
            // List of words
            d3.select("#crosscutting-detail").html("");
            // set the dimensions and margins of the graph
            var margin = {
                    top: 10,
                    right: 10,
                    bottom: 10,
                    left: 10
                },
                width = 1200 - margin.left - margin.right,
                height = 450 - margin.top - margin.bottom;
            // append the svg object to the body of the page
            var svg = d3.select("#crosscutting-detail").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")");
            // Constructs a new cloud layout instance. It run an algorythm to find the position of words that suits your requirements
            // Wordcloud features that are different from one word to the other must be here
            var layout = d3.layout.cloud()
                .size([width, height])
                .words(data.map(function (d) {
                    return {
                        text: d.CCI,
                        size: d.Total

                    };
                }))
                .padding(5) //space between words
                .rotate(function () {
                    return ~~(Math.random() * 2) * 90;
                })
                .fontSize(function (d) {
                    return d.size + 15;
                }) // font size of words
                .on("end", draw);
            layout.start();
            // This function takes the output of 'layout' above and draw the words
            // Wordcloud features that are THE SAME from one word to the other can be here
            function draw(words) {
                svg
                    .append("g")
                    .attr("transform", "translate(" + layout.size()[0] / 2 + "," + layout.size()[1] / 2 + ")")
                    .selectAll("text")
                    .data(words)
                    .enter().append("text")
                    .style("font-size", function (d) {
                        return (d.size);
                    })
                    .style("fill", randomColor)
                    .attr("text-anchor", "middle")
                    .style("font-family", "Impact")
                    .attr("transform", function (d) {
                        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                    })
                    .text(function (d) {
                        return d.text;
                    });
            }
        }
    </script>
    <script>
        var randomColor = (function () {
            var golden_ratio_conjugate = 0.618033988749895;
            var h = Math.random();
            var hslToRgb = function (h, s, l) {
                var r, g, b;
                if (s == 0) {
                    r = g = b = l; // achromatic
                } else {
                    function hue2rgb(p, q, t) {
                        if (t < 0) t += 1;
                        if (t > 1) t -= 1;
                        if (t < 1 / 6) return p + (q - p) * 6 * t;
                        if (t < 1 / 2) return q;
                        if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
                        return p;
                    }

                    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                    var p = 2 * l - q;
                    r = hue2rgb(p, q, h + 1 / 3);
                    g = hue2rgb(p, q, h);
                    b = hue2rgb(p, q, h - 1 / 3);
                }

                return '#' + Math.round(r * 255).toString(16) + Math.round(g * 255).toString(16) + Math
                    .round(b * 255).toString(16);
            };

            return function () {
                h += golden_ratio_conjugate;
                h %= 1;
                return hslToRgb(h, 0.5, 0.60);
            };
        })();
    </script>
    <script src="src/js/canvasjs.min.js"></script>
    <script src="src/js/html2canvas.js"></script>
    <script src="src/js/jspdf.min.js"></script>

    <script>
        $("#pdf").click(function () {
            $("#content").css({
                'border': '0px',
                'border-color': ''

            });
            html2canvas(document.querySelector("#content")).then(canvas => {
                var dataURL = canvas.toDataURL();
                var pdf = new jsPDF();
                pdf.addImage(dataURL, 'PNG', 0, 10, 210,
                    360); //addImage(image, format, x-coordinate, y-coordinate, width, height)
                pdf.save("2019-AFH-Interactive-Summary.pdf");
            });
        });
    </script>

    <script src="src/js/classie.js"></script>
    <script src="src/js/svgLoader.js"></script>
    <script>
        (function () {
            var pageWrap = document.getElementById('pagewrap'),
                pages = [].slice.call(pageWrap.querySelectorAll('div.container1')),
                currentPage = 0,
                triggerLoading = [].slice.call(pageWrap.querySelectorAll('a.pageload-link')),
                loader = new SVGLoader(document.getElementById('loader'), {
                    speedIn: 400,
                    easingIn: mina.easeinout
                });

            function init() {
                triggerLoading.forEach(function (trigger) {
                    trigger.addEventListener('click', function (ev) {
                        ev.preventDefault();
                        loader.show();
                        // after some time hide loader
                        setTimeout(function () {
                            loader.hide();

                            classie.removeClass(pages[currentPage], 'show');
                            // update..
                            currentPage = currentPage ? 0 : 1;
                            classie.addClass(pages[currentPage], 'show');

                        }, 2000);
                    });
                });
            }

            init();
        })();
    </script>
    <script>
        $('#detailVisualization').on('shown.bs.modal', function (e) {

            challenge_chart.resize();
            actiontaken_chart.resize();
            subcategory_chart.resize();

            chart_region.resize();
            chart_org.resize();
        });
        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            chart_region.resize();
            chart_org.resize();
        })


        // chart_stakeholder_comp.resize();
    </script>

    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-84289082-1', {
            'allowAnchor': true
        });
        ga('send', 'pageview', {
            'page': location.pathname + location.search + location.hash
        });
    </script>

    <script>
        function JSONToCSVConvertor(JSONData, ReportTitle, ShowLabel) {
            //If JSONData is not an object then JSON.parse will parse the JSON string in an Object
            var arrData = typeof JSONData != 'object' ? JSON.parse(JSONData) : JSONData;

            var CSV = '';
            //Set Report title in first row or line

            CSV += ReportTitle + '\r\n\n';

            //This condition will generate the Label/Header
            if (ShowLabel) {
                var row = "";

                //This loop will extract the label from 1st index of on array
                for (var index in arrData[0]) {

                    //Now convert each value to string and comma-seprated
                    row += index + ',';
                }

                row = row.slice(0, -1);

                //append Label row with line break
                CSV += row + '\r\n';
            }

            //1st loop is to extract each row
            for (var i = 0; i < arrData.length; i++) {
                var row = "";

                //2nd loop will extract each column and convert it in string comma-seprated
                for (var index in arrData[i]) {
                    row += '"' + arrData[i][index] + '",';
                }

                row.slice(0, row.length - 1);

                //add a line break after each row
                CSV += row + '\r\n';
            }

            if (CSV == '') {
                alert("Invalid data");
                return;
            }

            //Generate a file name
            var fileName = "Agenda_for_humanity_";
            //this will remove the blank-spaces from the title and replace it with an underscore
            fileName += ReportTitle.replace(/ /g, "_");

            //Initialize file format you want csv or xls
            var uri = 'data:text/csv;charset=utf-8,' + escape(CSV);

            // Now the little tricky part.
            // you can use either>> window.open(uri);
            // but this will not work in some browsers
            // or you will not get the correct file extension    

            //this trick will generate a temp <a /> tag
            var link = document.createElement("a");
            link.href = uri;

            //set the visibility hidden so it will not effect on your web-layout
            link.style = "visibility:hidden";
            link.download = fileName + ".csv";

            //this part will append the anchor tag and remove it after automatic click
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
    <script>
        function ExportPDF() {
            $("#content").css({
                'border': '0px',
                'border-color': ''

            });
            html2canvas(document.querySelector("#content")).then(canvas => {
                var dataURL = canvas.toDataURL();
                var pdf = new jsPDF();
                pdf.addImage(dataURL, 'PNG', 0, 5, 190,
                    280); //addImage(image, format, x-coordinate, y-coordinate, width, height)
                pdf.save("Agenda for Humanity Visualization.pdf");
            });
        }

        function ExportExcel(type, download) {
            var year = '2018';
            if (document.getElementById('y1').checked) {
                year = document.getElementById('y1').value;
            } else if (document.getElementById('y2').checked) {
                year = document.getElementById('y2').value;
            } else if (document.getElementById('y3').checked) {
                year = document.getElementById('y3').value;
            }
           // console.log(year);
            if (type == 'transformation' && download == 'pdf') {
                $("#transformation_chart").css({
                    'border': '0px',
                    'border-color': ''

                });
                html2canvas(document.querySelector("#transformation_chart")).then(canvas => {
                    var dataURL = canvas.toDataURL();
                    var pdf = new jsPDF();
                    pdf.addImage(dataURL, 'PNG', 0, 10, 210,
                        160); //addImage(image, format, x-coordinate, y-coordinate, width, height)
                    pdf.save(year + " Transformation.pdf");
                });
            } else if (type == 'region' && download == 'pdf') {
                $("#chart-stakeholder-region").css({
                    'border': '0px',
                    'border-color': ''

                });
                html2canvas(document.querySelector("#chart-stakeholder-region")).then(canvas => {
                    var dataURL = canvas.toDataURL();
                    var pdf = new jsPDF();
                    pdf.addImage(dataURL, 'PNG', 0, 10, 180,
                        100); //addImage(image, format, x-coordinate, y-coordinate, width, height)
                    pdf.save(year + " Stakeholder region.pdf");
                });
            } else if (type == 'organisation' && download == 'pdf') {
                $("#chart-stakeholder").css({
                    'border': '0px',
                    'border-color': ''

                });
                html2canvas(document.querySelector("#chart-stakeholder")).then(canvas => {
                    var dataURL = canvas.toDataURL();
                    var pdf = new jsPDF();
                    pdf.addImage(dataURL, 'PNG', 0, 10, 180,
                        100); //addImage(image, format, x-coordinate, y-coordinate, width, height)
                    pdf.save(year + " Stakeholder organization.pdf");
                });
            } else if (type == 'challenges' && download == 'pdf') {
                $("#chart_challenges").css({
                    'border': '0px',
                    'border-color': ''

                });
                html2canvas(document.querySelector("#chart_challenges")).then(canvas => {
                    var dataURL = canvas.toDataURL();
                    var pdf = new jsPDF();
                    pdf.addImage(dataURL, 'PNG', 0, 10, 180,
                        100); //addImage(image, format, x-coordinate, y-coordinate, width, height)
                    pdf.save(year + " Challenges.pdf");
                });
            } else if (type == 'cci' && download == 'pdf') {
                $("#crosscutting").css({
                    'border': '0px',
                    'border-color': ''

                });
                html2canvas(document.querySelector("#crosscutting")).then(canvas => {
                    var dataURL = canvas.toDataURL();
                    var pdf = new jsPDF();
                    pdf.addImage(dataURL, 'PNG', 0, 10, 180,
                        100); //addImage(image, format, x-coordinate, y-coordinate, width, height)
                    pdf.save(year + " Cross cutting issues.pdf");
                });
            }


            if (type == 'transformation' && download == 'excel') {

                // d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (crises) {
                d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (crises) {
                    var transformation_short = ['Transformation_Short'],
                        total = ['Total'],
                        transformation_long = ['Transformation_Long'],
                        reportingYear = ["ReportingYear"];
                    crises.forEach(function (element, index) {
                        if (element['ReportingYear'] == year) {
                            transformation_short.push(element['Transformation_Short']);
                            total.push(Number(element['Total']));
                            transformation_long.push(element['Transformation_Long']);
                            reportingYear.push(parseInt(element['ReportingYear']) + 1);
                        }

                    });


                    if (transformation_short.length > 1) {
                        var filtered = filterJSON(crises, year);
                        JSONToCSVConvertor(filtered, (parseInt(year) + 1) + " Transformation", true);
                    }
                });
            } else if (type == 'region' && download == 'excel') {
                d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/region.php', function (crises) {

                    var stakeHolders = ['StakeHolders'],
                        total = ['Total'],
                        reportingYear = ["ReportingYear"];
                    crises.forEach(function (element, index) {
                        if (element['ReportingYear'] == year) {
                            // console.log(element['ReportingYear']);
                            stakeHolders.push(element['Stakeholder']);
                            total.push(Number(element['Total']));
                            reportingYear.push(parseInt(element['ReportingYear']) + 1);
                        }

                    });

                    if (stakeHolders.length > 1) {
                        var filtered = filterJSON(crises, year);
                        JSONToCSVConvertor(filtered, (parseInt(year) + 1) +
                            " Stakholder by region of operation", true);
                    }

                });

            } else if (type == 'organisation' && download == 'excel') {
                d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/organization.php', function (
                    crises) {

                    var stakeHolders = ['StakeHolders'],
                        total = ['Total'],
                        reportingYear = ["ReportingYear"];
                    crises.forEach(function (element, index) {
                        if (element['ReportingYear'] == year) {
                            // console.log(element['ReportingYear']);
                            stakeHolders.push(element['Stakeholder']);
                            total.push(Number(element['Total']));
                            reportingYear.push(element['ReportingYear']);
                        }

                    });
                    if (stakeHolders.length > 1) {
                        var filtered = filterJSON(crises, year);
                        JSONToCSVConvertor(filtered, (parseInt(year) + 1) +
                            " Stakholder by type of organisation", true);
                    }
                });
            } else if (type == 'challenges' && download == 'excel') {

                d3.json('https://www.agendaforhumanity.org/viz_endpoint/challenges/get.php', function (crises) {

                    var challengeID = ['ChallengeID'],
                        challengesShortCode = ['ChallengesShortCode'],
                        reportingYear = ['ReportingYear'],
                        total = ['Total'];
                    crises.forEach(function (element, index) {
                        if (element['ReportingYear'] == year) {
                            challengeID.push([element['ChallengeID']]);
                            challengesShortCode.push([element['ChallengesShortCode']]);
                            total.push(Number(element['Total']));
                        }
                    });
                    if (challengeID.length > 1 && total.length > 1) {
                        var filtered = filterJSON(crises, year);
                        JSONToCSVConvertor(filtered, (parseInt(year) + 1) + " Challenges", true);
                    }
                });
            } else if (type == 'cci' && download == 'excel') {
                d3.json('https://www.agendaforhumanity.org/viz_endpoint/crosscutting-issues/get.php', function (error,
                    data) {

                    if (error) {
                        throw error;
                    }
                    var cci = ['CCI'],
                        reportingYear = ['ReportingYear'],
                        total = ['Total'];


                    data.forEach(function (element, index) {
                        var obj = {
                            CCI: '',
                            Total: ''
                        };
                        if (element['ReportingYear'] == year) {
                            cci.push(element['CCI']);
                            total.push(element['Total']);

                        }
                    });
                    if (cci.length > 1) {
                        var filtered = filterJSON(data, year);
                        JSONToCSVConvertor(filtered, (parseInt(year) + 1) + " Cross cutting issues", true);
                    }

                });
            }


        }
    </script>
    <script>
        $("#tab2").click(function () {
            chart_reported_2016.resize();
            chart_reported_2017.resize();
            chart_reported_2018.resize();
            stakholder.resize();
            transforms.resize();
            chal.resize();
            chart_transformation_comps.resize();
            chart_stakeholder_line.resize();
            chart_region.resize();
            chart_org.resize();
        });
        $("#tab1").click(function () {

            PopulateStokeHolder("2018");
            PopulateStokeHolderRegion("2018");
            PopulateTransformation("2018");
            PopulateTransformationTable("2018");
            PopulateTransformationMobileTable("2018");

            PopulateStackholderTotal("2018");
            PopulateHeader("2018");
            PopulateCrossCuttingIssues("2018");
            PopulateCrossCuttingIssueTable("2018");
            PopulateChallenge("2018");
            PopulateStokeHolderTable("2018");
            PopulateStokeHolderRegionTable("2018");



            chart_region.resize();
            chart_org.resize();
        });

        $("#tab3").click(function () {

            PopulateStokeHolder("2017");
            PopulateStokeHolderRegion("2017");
            PopulateTransformation("2017");
            PopulateTransformationTable("2017");
            PopulateTransformationMobileTable("2017");

            PopulateStackholderTotal("2017");
            PopulateHeader("2017");
            PopulateCrossCuttingIssues("2017");
            PopulateCrossCuttingIssueTable("2017");
            PopulateChallenge("2017");
            PopulateStokeHolderTable("2017");
            PopulateStokeHolderRegionTable("2017");



            chart_reported_2016.resize();
            chart_reported_2017.resize();
            chart_reported_2018.resize();
            stakholder.resize();
            transforms.resize();
            chal.resize();
            chart_transformation_comps.resize();
            chart_stakeholder_line.resize();
            chart_region.resize();
            chart_org.resize();
        });

        $("#tab4").click(function () {

            PopulateStokeHolder("2016");
            PopulateStokeHolderRegion("2016");
            PopulateTransformation("2016");
            PopulateTransformationTable("2016");
            PopulateTransformationMobileTable("2016");

            PopulateStackholderTotal("2016");
            PopulateHeader("2016");
            PopulateCrossCuttingIssues("2016");
            PopulateCrossCuttingIssueTable("2016");
            PopulateChallenge("2016");
            PopulateStokeHolderTable("2016");
            PopulateStokeHolderRegionTable("2016");



            chart_reported_2016.resize();
            chart_reported_2017.resize();
            chart_reported_2018.resize();
            stakholder.resize();
            transforms.resize();
            chal.resize();
            chart_transformation_comps.resize();
            chart_stakeholder_line.resize();
            chart_region.resize();
            chart_org.resize();
        });


        $("#tab7").click(function () {

            PopulateStokeHolder("2016");
            PopulateStokeHolderRegion("2016");
            PopulateTransformation("2016");
            PopulateTransformationTable("2016");
            PopulateTransformationMobileTable("2016");

            PopulateStackholderTotal("2016");
            PopulateHeader("2016");
            PopulateCrossCuttingIssues("2016");
            PopulateCrossCuttingIssueTable("2016");
            PopulateChallenge("2016");
            PopulateStokeHolderTable("2016");
            PopulateStokeHolderRegionTable("2016");



            chart_reported_2016.resize();
            chart_reported_2017.resize();
            chart_reported_2018.resize();
            stakholder.resize();
            transforms.resize();
            chal.resize();
            chart_transformation_comps.resize();
            chart_stakeholder_line.resize();
            chart_region.resize();
            chart_org.resize();
        });

        $("#tab6").click(function () {

            PopulateStokeHolder("2017");
            PopulateStokeHolderRegion("2017");
            PopulateTransformation("2017");
            PopulateTransformationTable("2017");
            PopulateTransformationMobileTable("2017");

            PopulateStackholderTotal("2017");
            PopulateHeader("2017");
            PopulateCrossCuttingIssues("2017");
            PopulateCrossCuttingIssueTable("2017");
            PopulateChallenge("2017");
            PopulateStokeHolderTable("2017");
            PopulateStokeHolderRegionTable("2017");



            chart_reported_2016.resize();
            chart_reported_2017.resize();
            chart_reported_2018.resize();
            stakholder.resize();
            transforms.resize();
            chal.resize();
            chart_transformation_comps.resize();
            chart_stakeholder_line.resize();
            chart_region.resize();
            chart_org.resize();
        });

        $("#tab5").click(function () {

            PopulateStokeHolder("2018");
            PopulateStokeHolderRegion("2018");
            PopulateTransformation("2018");
            PopulateTransformationTable("2018");
            PopulateTransformationMobileTable("2018");

            PopulateStackholderTotal("2018");
            PopulateHeader("2018");
            PopulateCrossCuttingIssues("2018");
            PopulateCrossCuttingIssueTable("2018");
            PopulateChallenge("2018");
            PopulateStokeHolderTable("2018");
            PopulateStokeHolderRegionTable("2018");



            chart_reported_2016.resize();
            chart_reported_2017.resize();
            chart_reported_2018.resize();
            stakholder.resize();
            transforms.resize();
            chal.resize();
            chart_transformation_comps.resize();
            chart_stakeholder_line.resize();
            chart_region.resize();
            chart_org.resize();
        });
        $("#tab8").click(function () {
           // chart_reported_2016.resize();
         //   chart_reported_2017.resize();
       //     chart_reported_2018.resize();
       //     stakholder.resize();
      //      transforms.resize();
     //       chal.resize();
     //       chart_transformation_comps.resize();
    //        chart_stakeholder_line.resize();
       //     chart_region.resize();
      //      chart_org.resize();
        });
    </script>
    <script>
        function init() {
            var sorter = tsorter.create('byregion');
            var sorter1 = tsorter.create('byorg');
        }

        window.onload = init;
    </script>

    <script>
    $(document).ready(function (){
        $("#tab1").prop("checked", true);
        $("#tab5").prop("checked", true);

    });
    </script>
</body>

</html>